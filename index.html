<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BuzzAd ÏûòÍ≥†Î•∏Î¶¨Î∑∞ ÏãúÎÆ¨Î†àÏù¥ÌÑ∞</title>
    <style>

:root {
  --border-color: #333;
  --bg-gray: #eee;
  --success: #4caf50;
  --fail: #f44336;
  --loading: #2196f3;
}

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            background: #f5f6fa;
            color: var(--border-color);
            overflow-x: hidden;
        }

        /* ===========================================
           Ï†ÑÏ≤¥ Î†àÏù¥ÏïÑÏõÉ
        =========================================== */
        .main-layout {
            display: flex;
            min-height: 100vh;
            max-height: 100vh;
            overflow: hidden;
        }

        /* ===========================================
           Ï¢åÏ∏° Ìé∏Ïßë Ìå®ÎÑê
        =========================================== */
        .editor-panel {
            width: 50%;
            min-width: 400px;
            background: #ffffff;
            border-right: 1px solid #e1e5e9;
            overflow-y: auto;
            height: 100vh;
        }

        .editor-header {
            padding: 2rem 2rem 1rem;
            border-bottom: 1px solid #e1e5e9;
            background: white;
            position: sticky;
            top: 0;
            z-index: 10;
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            gap: 1rem;
        }

        .header-content {
            flex: 1;
        }

        .header-title {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--border-color);
            margin-bottom: 0.5rem;
        }

        .header-subtitle {
            color: #666;
            font-size: 0.875rem;
        }

        .header-buttons {
            display: flex;
            gap: 0.5rem;
            flex-shrink: 0;
        }

        .btn {
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            font-size: 0.8rem;
            cursor: pointer;
            transition: all 0.2s;
            white-space: nowrap;
            border: 1px solid;
            text-decoration: none;
            display: inline-block;
        }

        .btn-primary {
            background: #10b981;
            color: white;
            border-color: #10b981;
        }

        .btn-primary:hover {
            background: #059669;
            border-color: #059669;
        }

        .btn-secondary {
            background: #6366f1;
            color: white;
            border-color: #6366f1;
        }

        .btn-secondary:hover {
            background: #4f46e5;
            border-color: #4f46e5;
        }

        .btn-outline {
            background: #f8f9fa;
            color: #666;
            border-color: #ddd;
        }

        .btn-outline:hover {
            background: #e9ecef;
            color: var(--border-color);
        }

        .editor-content {
            padding: 2rem;
        }

        /* ===========================================
           ÏÇ¨Ïö© Í∞ÄÏù¥Îìú Ïπ¥Îìú ÎîîÏûêÏù∏ 
        =========================================== */
        .workflow-card {
            background: #fef7ed;
            border: 1px solid #fed7aa;
            border-radius: 1rem;
            padding: 1.5rem;
            margin-bottom: 2rem;
            color: #9a3412;
            position: relative;
        }

        .workflow-title {
            font-size: 1rem;
            font-weight: 600;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: #9a3412;
        }

        .workflow-content {
            font-size: 0.875rem;
            line-height: 1.6;
        }

        .workflow-step {
            margin-bottom: 0.5rem;
            color: #9a3412;
        }

        .workflow-step:last-of-type {
            margin-bottom: 1rem;
        }

        .workflow-step strong {
            color: #9a3412;
            font-weight: 600;
        }

        .workflow-note {
            background: transparent;
            border: none;
            font-size: 0.875rem;
            text-align: left;
            margin-top: 0.5rem;
            color: #dc2626;
            font-weight: 500;
        }

        /* ===========================================
           Î∏åÎûúÎìú ÏûÖÎ†• ÏÑπÏÖò
        =========================================== */
        .brand-input-section {
            margin-bottom: 2rem;
        }

        .input-label {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-weight: 600;
            color: #374151;
            margin-bottom: 0.5rem;
            font-size: 0.875rem;
        }

        .tooltip-trigger {
            cursor: help;
            opacity: 0.7;
        }

        .form-input {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #ddd;
            border-radius: 0.5rem;
            font-size: 0.875rem;
            transition: border-color 0.2s;
        }

        .form-input:focus {
            outline: none;
            border-color: #4285f4;
            box-shadow: 0 0 0 3px rgba(66, 133, 244, 0.1);
        }

        /* ===========================================
           Ï†úÌíà ÏÑπÏÖò
        =========================================== */
        .product-section {
            margin-bottom: 2rem;
        }

        .section-header {
            margin-bottom: 1rem;
        }

        .section-title {
            font-size: 1.125rem;
            font-weight: 600;
            color: var(--border-color);
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .product-table-container {
            border: 1px solid #e1e5e9;
            border-radius: 0.75rem;
            overflow: hidden;
            background: white;
            margin-bottom: 1rem;
        }

        .product-table {
            width: 100%;
            border-collapse: collapse;
        }

        .product-table th {
            background: #f8f9fa;
            font-weight: 600;
            color: var(--border-color);
            font-size: 0.875rem;
            padding: 0.75rem;
            text-align: left;
            border-bottom: 2px solid #e1e5e9;
            border-right: 1px solid #e1e5e9;
        }

        .product-table th:last-child {
            border-right: none;
        }

        .product-table td {
            padding: 0.75rem;
            border-bottom: 1px solid #e1e5e9;
            border-right: 1px solid #e1e5e9;
            min-height: 50px;
            vertical-align: top;
            position: relative;
        }

        .product-table td:last-child {
            border-right: none;
        }

        .product-table tr:last-child td {
            border-bottom: none;
        }

        /* Ìé∏Ïßë Í∞ÄÎä•Ìïú ÏÖÄ */
        .editable-cell {
            cursor: text;
            transition: all 0.2s;
            min-height: 50px;
            outline: none;
            word-wrap: break-word;
            white-space: pre-wrap;
        }

        .editable-cell:hover {
            background: #f8f9fa;
        }

        .editable-cell:focus {
            background: white;
            border: 2px solid #4285f4;
            padding: calc(0.75rem - 1px);
            box-shadow: 0 0 0 3px rgba(66, 133, 244, 0.1);
        }

        .editable-cell.active {
            background: #e3f2fd;
            border: 2px solid #4285f4;
            padding: calc(0.75rem - 1px);
        }

        .editable-cell.empty {
            color: #9ca3af;
            font-style: italic;
        }

        .editable-cell.empty:focus {
            color: var(--border-color);
            font-style: normal;
        }

        /* Í≥†ÎØº ÏÖÄ Ïä§ÌÉÄÏùº */
        .concern-cell {
            background: #f0f7ff;
            color: #1976d2;
            font-weight: 500;
            font-size: 0.8rem;
            text-align: center;
        }

        .concern-cell:hover {
            background: #e3f2fd;
        }

        .concern-cell:focus {
            background: white;
            color: var(--border-color);
        }

        .concern-cell.active {
            background: #e3f2fd;
        }

        /* URL ÏÖÄ */
        .url-cell {
            max-width: 200px;
            word-break: break-all;
            font-size: 0.75rem;
        }

        /* ===========================================
           Ïö∞Ï∏° ÏãúÎÆ¨Î†àÏù¥ÌÑ∞ Ìå®ÎÑê
        =========================================== */
        .simulator-panel {
            width: 50%;
            min-width: 400px;
            background: #fafafa;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 2rem;
            height: 100vh;
            overflow: hidden;
            position: fixed;
            right: 0;
            top: 0;
        }

        .phone-frame {
            width: 320px;
            height: 640px;
            background: var(--border-color);
            border-radius: 2rem;
            padding: 1rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            position: relative;
        }

        .phone-screen {
            width: 100%;
            height: 100%;
            background: #fff;
            border-radius: 1.5rem;
            overflow: hidden;
            position: relative;
        }

        .simulator-container {
            width: 100%;
            height: 100%;
            position: relative;
        }

        /* ÌôîÎ©¥ Ï†ÑÌôò */
        .screen {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            width: 100%;
            height: 100%;
            transition: opacity 0.3s ease-in-out;
        }

        .screen.hidden {
            opacity: 0;
            pointer-events: none;
        }

        /* Î©îÏù∏ ÌôîÎ©¥ */
        .main-screen {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1.5rem;
            padding: 4rem 1rem 2rem;
            overflow: hidden;
        }

        .title {
            text-align: center;
            font-size: 0.9rem;
            font-weight: bold;
            color: var(--border-color)333;
            white-space: pre-line;
            line-height: 1.4;
        }

        .options-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 0.25rem;
        }

        .option-button {
            border-radius: 0.5rem;
            background: #ffffff;
            width: 5.5rem;
            height: 5.5rem;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            border: none;
            appearance: none;
            font-family: inherit;
        }

        .option-button:active {
            transform: scale(1.05);
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.12);
        }

        .option-text {
            font-weight: 500;
            font-size: 0.7rem;
            line-height: 1.2;
            color: var(--border-color)333;
            transition: all 0.2s ease;
            white-space: pre-line;
            text-align: center;
            padding: 0.5rem;
        }

        .option-button:active .option-text {
            font-size: 0.8rem;
            font-weight: bold;
        }

        /* Î°úÎî© ÌôîÎ©¥ */
        .loading-screen {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1.5rem;
            padding: 4rem 1rem 2rem;
            overflow: hidden;
        }

        .loading-title {
            text-align: center;
            font-size: 0.9rem;
            font-weight: bold;
            color: var(--border-color)333;
            white-space: pre-line;
            line-height: 1.4;
        }

        .loading-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            width: 50%;
            aspect-ratio: 1;
            border-radius: 50%;
            background: #ffffff;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
            position: relative;
        }

        .loading-spinner-container {
            width: 80%;
            height: 80%;
            transform: translateY(-0.25rem);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .loading-spinner {
            width: 24px;
            height: 24px;
            border: 2px solid #e5e7eb;
            border-top: 2px solid var(--border-color)333;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .loading-text {
            position: absolute;
            bottom: -1.5rem;
            font-size: 0.6rem;
            font-weight: 500;
            color: rgba(51, 51, 51, 0.7);
            transition: opacity 0.3s ease-in-out;
            opacity: 1;
        }

        /* ÏÉÅÌíà ÏÉÅÏÑ∏ ÌôîÎ©¥ */
        .product-screen {
            background: #ffffff;
            padding: 1rem 0.75rem;
            display: flex;
            flex-direction: column;
            gap: 0;
            justify-content: flex-start;
            position: relative;
            min-height: 100%;
        }

        .back-button {
            border-radius: 50%;
            padding: 0.5rem;
            width: 2rem;
            height: 2rem;
            background: #f8f9fa;
            cursor: pointer;
            align-self: flex-start;
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 1rem;
        }

        .back-button svg {
            width: 1rem;
            height: 1rem;
            stroke: var(--border-color)333;
            stroke-width: 2;
        }

        .review-container {
            position: relative;
            padding: 1rem;
            padding-top: 1.5rem;
            border-radius: 0.5rem;
            background: #f8f9fa;
            width: 100%;
            margin-bottom: 1.5rem;
        }

        .review-icon {
            position: absolute;
            top: -0.75rem;
            left: 50%;
            width: 1.5rem;
            height: 1.5rem;
            border-radius: 50%;
            background: #ffffff;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
            transform: translateX(-50%);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.75rem;
        }

        .review-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.5rem;
        }

        .review-text {
            white-space: pre-line;
            color: rgba(51, 51, 51, 0.8);
            font-size: 0.6rem;
            line-height: 1.4;
            font-weight: normal;
            text-align: left;
            width: 100%;
        }

        .rating {
            font-weight: 600;
            white-space: pre-line;
            font-size: 0.55rem;
            color: #D81E1F;
            align-self: center;
        }

        .product-highlight {
            color: var(--border-color)333;
            font-size: 0.6rem;
            font-weight: 600;
            white-space: pre-line;
            text-align: center;
        }

        .spacer {
            opacity: 0.2;
            height: 1rem;
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 0.75rem 0;
        }

        .spacer-element {
            width: 2rem;
            height: 1rem;
            background: #e5e7eb;
            border-radius: 0.5rem;
        }

        .product-info {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.75rem;
            margin-bottom: 1.5rem;
            flex: 1;
            justify-content: center;
        }

        .product-image {
            position: relative;
            width: 6rem;
            height: 6rem;
            border-radius: 0.75rem;
            overflow: hidden;
            background: #ffffff;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.55rem;
            color: #6b7280;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .product-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .product-placeholder {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 0.25rem;
            padding: 0.5rem;
            text-align: center;
            background: linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%);
            width: 100%;
            height: 100%;
        }

        .product-icon {
            font-size: 1.5rem;
            margin-bottom: 0.25rem;
        }

        .product-name {
            color: var(--border-color)333;
            font-size: 0.65rem;
            white-space: pre-line;
            font-weight: 500;
            text-align: center;
            line-height: 1.3;
            max-width: 200px;
        }

        .cta-button {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            width: 100%;
            padding: 0.75rem;
            background: #D2302F;
            color: white;
            font-weight: 600;
            font-size: 0.7rem;
            transition: all 0.2s ease-in-out;
            cursor: pointer;
            overflow: hidden;
            border: none;
            border-radius: 0;
            margin: 0;
        }

        .cta-button:active {
            padding-top: 0.875rem;
            padding-bottom: 0.625rem;
        }

        .cta-overlay {
            position: absolute;
            inset: 0;
            background: rgba(255, 255, 255, 0.1);
            opacity: 0;
            transition: opacity 0.2s;
            pointer-events: none;
        }

        .cta-button:active .cta-overlay {
            opacity: 1;
        }

        .cta-text {
            position: relative;
            z-index: 10;
            color: white;
        }

        /* AI ÏûêÎèôÏÉùÏÑ± ÏïàÎÇ¥ ÏïåÎ¶º (Î™®Î∞îÏùº ÌôîÎ©¥ ÏÉÅÎã®) */
        .ai-info-notice {
            position: absolute;
            top: -60px;
            left: 50%;
            transform: translateX(-50%);
            width: 280px;
            background: rgba(255, 85, 85, 0.95);
            color: white;
            padding: 1rem;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(255, 85, 85, 0.3);
            opacity: 0;
            transition: all 0.3s ease;
            z-index: 1000;
        }

        .ai-info-notice.show {
            top: -80px;
            opacity: 1;
        }

        .ai-info-content {
            display: flex;
            align-items: flex-start;
            gap: 0.75rem;
        }

        .ai-info-icon {
            font-size: 1.25rem;
            flex-shrink: 0;
        }

        .ai-info-text {
            font-size: 0.75rem;
            line-height: 1.4;
        }

        /* Ï¢ÅÏùÄ ÌôîÎ©¥ÏóêÏÑú ÏÑ∏Î°ú Î∞∞Ïπò */
        @media (max-width: 900px) {
            .editor-header {
                flex-direction: column;
                align-items: stretch;
                gap: 1rem;
            }
            
            .header-content-section {
                order: 1;
            }
            
            .header-buttons-section {
                order: 2;
                justify-content: center;
            }
        }

        /* ===========================================
           ÏóÖÎç∞Ïù¥Ìä∏ ÏïåÎ¶º
        =========================================== */
        .update-notice {
            position: fixed;
            top: 1rem;
            left: 50%;
            transform: translateX(-50%);
            background: #FF5555;
            color: white;
            padding: 0.75rem 1.25rem;
            border-radius: 25px;
            font-size: 0.85rem;
            font-weight: 600;
            opacity: 0;
            transform: translateX(-50%) translateY(-1rem);
            transition: all 0.3s ease;
            z-index: 1000;
            box-shadow: 0 4px 20px rgba(255, 85, 85, 0.3);
        }

        .update-notice.show {
            opacity: 1;
            transform: translateX(-50%) translateY(0);
        }

        /* ===========================================
           Î∞òÏùëÌòï
        =========================================== */
        @media (max-width: 768px) {
            .main-layout {
                flex-direction: column;
                max-height: none;
                overflow: visible;
            }
            
            .editor-panel {
                width: 100%;
                min-width: auto;
                height: auto;
                position: relative;
            }
            
            .simulator-panel {
                width: 100%;
                min-width: auto;
                height: 60vh;
                position: relative;
                right: auto;
                top: auto;
            }
            
            .phone-frame {
                width: 240px;
                height: 480px;
            }
        }

        @media (min-width: 769px) {
            .main-layout {
                flex-direction: row !important;
            }
            
            .editor-panel {
                width: 50% !important;
                height: 100vh !important;
            }
            
            .simulator-panel {
                width: 50% !important;
                height: 100vh !important;
                position: fixed !important;
                right: 0 !important;
                top: 0 !important;
            }
        }
    </style>
<style id="legacy-capture-css">

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            background: #f5f6fa;
            color: var(--border-color);
            overflow-x: hidden;
        }

        /* Ï†ÑÏ≤¥ Î†àÏù¥ÏïÑÏõÉ */
        .main-layout {
            display: flex;
            min-height: 100vh;
            max-height: 100vh;
            overflow: hidden;
        }

        /* Ï¢åÏ∏° Ìé∏Ïßë Ìå®ÎÑê */
        .editor-panel {
            width: 50%;
            min-width: 400px;
            background: #ffffff;
            border-right: 1px solid #e1e5e9;
            overflow-y: auto;
            padding: 2rem;
            height: 100vh;
        }

        .editor-header {
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid #e1e5e9;
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
        }

        .editor-header-content {
            flex: 1;
        }

        .header-buttons {
            display: flex;
            gap: 0.5rem;
            align-items: flex-start;
        }

        .download-button {
            background: #10b981;
            color: white;
            border: 1px solid #10b981;
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            font-size: 0.8rem;
            cursor: pointer;
            transition: all 0.2s;
            white-space: nowrap;
        }

        .download-button:hover {
            background: #059669;
            border-color: #059669;
        }

        .screenshot-button {
            background: #6366f1;
            color: white;
            border: 1px solid #6366f1;
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            font-size: 0.8rem;
            cursor: pointer;
            transition: all 0.2s;
            white-space: nowrap;
        }

        .screenshot-button:hover {
            background: #4f46e5;
            border-color: #4f46e5;
        }

        .editor-title {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--border-color);
            margin-bottom: 0.5rem;
        }

        .editor-subtitle {
            color: #666;
            font-size: 0.875rem;
        }

        .reset-button {
            background: #f8f9fa;
            color: #666;
            border: 1px solid #ddd;
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            font-size: 0.8rem;
            cursor: pointer;
            transition: all 0.2s;
            white-space: nowrap;
        }

        .reset-button:hover {
            background: #e9ecef;
            color: var(--border-color);
        }

        /* Ìèº ÏÑπÏÖò */
        .form-section {
            margin-bottom: 2rem;
        }

        .section-title {
            font-size: 1.125rem;
            font-weight: 600;
            color: var(--border-color);
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .section-icon {
            font-size: 1.25rem;
        }

        /* Ï†úÌíà ÌÉ≠ */
        .product-tabs {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
            position: sticky;
            top: 0;
            background: white;
            padding: 1rem 0;
            z-index: 10;
            border-bottom: 1px solid #e1e5e9;
        }

        .product-tab {
            padding: 0.5rem 1rem;
            border: 1px solid #ddd;
            background: #f8f9fa;
            border-radius: 1.5rem;
            font-size: 0.8rem;
            cursor: pointer;
            transition: all 0.2s;
            color: #666;
            font-weight: 500;
            flex: 1;
            min-width: 0;
            text-align: center;
        }

        .product-tab:hover {
            background: #e9ecef;
            border-color: #bbb;
        }

        .product-tab.active {
            background: #4285f4;
            color: white;
            border-color: #4285f4;
        }

        /* Í≥µÌÜµ Ìèº */
        .product-divider {
            margin: 1.5rem 0;
            padding: 0.75rem;
            background: linear-gradient(90deg, #f0f7ff 0%, #e3f2fd 100%);
            border-left: 4px solid #4285f4;
            border-radius: 0.5rem;
            text-align: center;
            font-size: 0.875rem;
            color: #1976d2;
            font-weight: 500;
        }

        /* Ìèº ÏöîÏÜå */
        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-label {
            display: block;
            font-weight: 500;
            color: #555;
            margin-bottom: 0.5rem;
            font-size: 0.875rem;
        }

        .form-input {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #ddd;
            border-radius: 0.5rem;
            font-size: 0.875rem;
            transition: border-color 0.2s;
        }

        .form-input:focus {
            outline: none;
            border-color: #4285f4;
            box-shadow: 0 0 0 3px rgba(66, 133, 244, 0.1);
        }

        .form-textarea {
            min-height: 80px;
            resize: vertical;
        }

        .form-textarea.large {
            min-height: 120px;
        }

        .concern-textarea {
            padding: 0.5rem;
            font-size: 0.8rem;
            resize: vertical;
            min-height: 50px;
            line-height: 1.3;
        }

        /* Ïö∞Ï∏° ÏãúÎÆ¨Î†àÏù¥ÌÑ∞ */
        .simulator-panel {
            width: 50%;
            min-width: 400px;
            background: #f8f9fa;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 2rem;
            height: 100vh;
            overflow: hidden;
            position: fixed;
            right: 0;
            top: 0;
        }

        .phone-frame {
            width: 320px;
            height: 640px;
            background: var(--border-color);
            border-radius: 2rem;
            padding: 1rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            position: relative;
        }

        .phone-screen {
            width: 100%;
            height: 100%;
            background: #fff;
            border-radius: 1.5rem;
            overflow: hidden;
            position: relative;
        }

        .simulator-container {
            width: 100%;
            height: 100%;
            position: relative;
        }

        /* ÌôîÎ©¥ Ï†ÑÌôò */
        .screen {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            width: 100%;
            height: 100%;
            transition: opacity 0.3s ease-in-out;
        }

        .screen.hidden {
            opacity: 0;
            pointer-events: none;
        }

        /* Î©îÏù∏ ÌôîÎ©¥ */
        .main-screen {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1.5rem;
            padding: 4rem 1rem 2rem;
            overflow: hidden;
        }

        .title {
            text-align: center;
            font-size: 0.9rem;
            font-weight: bold;
            color: var(--border-color)333;
            white-space: pre-line;
            line-height: 1.4;
        }

        .options-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 0.25rem;
        }

        .option-button {
            border-radius: 0.5rem;
            background: #ffffff;
            width: 5.5rem;
            height: 5.5rem;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            border: none;
            appearance: none;
            font-family: inherit;
        }

        .option-button:active {
            transform: scale(1.05);
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.12);
        }

        .option-text {
            font-weight: 500;
            font-size: 0.7rem;
            line-height: 1.2;
            color: var(--border-color)333;
            transition: all 0.2s ease;
            white-space: pre-line;
            text-align: center;
            padding: 0.5rem;
        }

        .option-button:active .option-text {
            font-size: 0.8rem;
            font-weight: bold;
        }

        /* Î°úÎî© ÌôîÎ©¥ */
        .loading-screen {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1.5rem;
            padding: 4rem 1rem 2rem;
            overflow: hidden;
        }

        .loading-title {
            text-align: center;
            font-size: 0.9rem;
            font-weight: bold;
            color: var(--border-color)333;
            white-space: pre-line;
            line-height: 1.4;
        }

        .loading-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            width: 50%;
            aspect-ratio: 1;
            border-radius: 50%;
            background: #ffffff;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
            position: relative;
        }

        .loading-spinner-container {
            width: 80%;
            height: 80%;
            transform: translateY(-0.25rem);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .loading-spinner {
            width: 24px;
            height: 24px;
            border: 2px solid #e5e7eb;
            border-top: 2px solid var(--border-color)333;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .loading-text {
            position: absolute;
            bottom: -1.5rem;
            font-size: 0.6rem;
            font-weight: 500;
            color: rgba(51, 51, 51, 0.7);
            transition: opacity 0.3s ease-in-out;
            opacity: 1;
        }

        /* ÏÉÅÌíà ÏÉÅÏÑ∏ ÌôîÎ©¥ */
        .product-screen {
            background: #ffffff;
            padding: 1rem 0.75rem;
            display: flex;
            flex-direction: column;
            gap: 0;
            justify-content: flex-start;
            position: relative;
            min-height: 100%;
        }

        .back-button {
            border-radius: 50%;
            padding: 0.5rem;
            width: 2rem;
            height: 2rem;
            background: #f8f9fa;
            cursor: pointer;
            align-self: flex-start;
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 1rem;
        }

        .back-button svg {
            width: 1rem;
            height: 1rem;
            stroke: var(--border-color)333;
            stroke-width: 2;
        }

        .review-container {
            position: relative;
            padding: 1rem;
            padding-top: 1.5rem;
            border-radius: 0.5rem;
            background: #f8f9fa;
            width: 100%;
            margin-bottom: 1.5rem;
        }

        .review-icon {
            position: absolute;
            top: -0.75rem;
            left: 50%;
            width: 1.5rem;
            height: 1.5rem;
            border-radius: 50%;
            background: #ffffff;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
            transform: translateX(-50%);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.75rem;
        }

        .review-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.5rem;
        }

        .review-text {
            white-space: pre-line;
            color: rgba(51, 51, 51, 0.8);
            font-size: 0.6rem;
            line-height: 1.4;
            font-weight: normal;
            text-align: left;
            width: 100%;
        }

        .rating {
            font-weight: 600;
            white-space: pre-line;
            font-size: 0.55rem;
            color: #D81E1F;
            align-self: center;
        }

        .product-highlight {
            color: var(--border-color)333;
            font-size: 0.6rem;
            font-weight: 600;
            white-space: pre-line;
            text-align: center;
        }

        .spacer {
            opacity: 0.2;
            height: 1rem;
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 0.75rem 0;
        }

        .spacer-element {
            width: 2rem;
            height: 1rem;
            background: #e5e7eb;
            border-radius: 0.5rem;
        }

        .product-info {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.75rem;
            margin-bottom: 1.5rem;
            flex: 1;
            justify-content: center;
        }

        .product-image {
            position: relative;
            width: 6rem;
            height: 6rem;
            border-radius: 0.75rem;
            overflow: hidden;
            background: #ffffff;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.55rem;
            color: #6b7280;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .product-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .product-placeholder {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 0.25rem;
            padding: 0.5rem;
            text-align: center;
            background: linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%);
            width: 100%;
            height: 100%;
        }

        .product-icon {
            font-size: 1.5rem;
            margin-bottom: 0.25rem;
        }

        .product-name {
            color: var(--border-color)333;
            font-size: 0.65rem;
            white-space: pre-line;
            font-weight: 500;
            text-align: center;
            line-height: 1.3;
            max-width: 200px;
        }

        .cta-button {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            width: 100%;
            padding: 0.75rem;
            background: #D2302F;
            color: white;
            font-weight: 600;
            font-size: 0.7rem;
            transition: all 0.2s ease-in-out;
            cursor: pointer;
            overflow: hidden;
            border: none;
            border-radius: 0;
            margin: 0;
        }

        .cta-button:active {
            padding-top: 0.875rem;
            padding-bottom: 0.625rem;
        }

        .cta-overlay {
            position: absolute;
            inset: 0;
            background: rgba(255, 255, 255, 0.1);
            opacity: 0;
            transition: opacity 0.2s;
            pointer-events: none;
        }

        .cta-button:active .cta-overlay {
            opacity: 1;
        }

        .cta-text {
            position: relative;
            z-index: 10;
            color: white;
        }

        /* ÏóÖÎç∞Ïù¥Ìä∏ ÏïåÎ¶º */
        .update-notice {
            position: fixed;
            top: 1rem;
            left: 50%;
            transform: translateX(-50%);
            background: #10b981;
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 2rem;
            font-size: 0.8rem;
            opacity: 0;
            transform: translateX(-50%) translateY(-1rem);
            transition: all 0.3s ease;
            z-index: 1000;
            box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
        }

        .update-notice.show {
            opacity: 1;
            transform: translateX(-50%) translateY(0);
        }

        /* Ï∫°Ï≤ò Î™®Îã¨ Ïä§ÌÉÄÏùº */
        .capture-modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            z-index: 10000;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .capture-modal.hidden {
            display: none;
        }

        .capture-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(5px);
        }

        .capture-content {
            position: relative;
            background: white;
            border-radius: 1rem;
            padding: 2rem;
            max-width: 800px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        }

        .capture-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .capture-header h3 {
            font-size: 1.25rem;
            font-weight: bold;
            color: var(--border-color);
            margin: 0;
        }

        .capture-close {
            background: none;
            border: none;
            font-size: 1.5rem;
            color: #666;
            cursor: pointer;
            padding: 0.25rem;
        }

        .capture-close:hover {
            color: var(--border-color);
        }

        .capture-progress {
            margin-bottom: 2rem;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e5e7eb;
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 0.5rem;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #10b981, #059669);
            width: 0%;
            transition: width 0.3s ease;
        }

        .progress-text {
            text-align: center;
            font-size: 0.875rem;
            color: #666;
        }

        .capture-previews {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .preview-container {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .preview-title {
            font-weight: 600;
            color: var(--border-color);
            margin-bottom: 1rem;
            font-size: 0.875rem;
        }

        .preview-frame {
            width: 160px;
            height: 320px;
            border: 2px solid #e5e7eb;
            border-radius: 1rem;
            overflow: hidden;
            position: relative;
            background: #f8f9fa;
            margin-bottom: 1rem;
        }

        .preview-loading {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 0.75rem;
            color: #666;
        }

        .preview-status {
            font-size: 0.75rem;
            padding: 0.25rem 0.75rem;
            border-radius: 1rem;
            background: #f3f4f6;
            color: #6b7280;
        }

        .preview-status.processing {
            background: #fef3c7;
            color: #d97706;
        }

        .preview-status.completed {
            background: #d1fae5;
            color: #059669;
        }

        .capture-actions {
            text-align: center;
        }

        .capture-button {
            background: #4285f4;
            color: white;
            border: none;
            padding: 0.75rem 2rem;
            border-radius: 0.5rem;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.2s;
        }

        .capture-button:hover {
            background: #3367d6;
        }

        .capture-button:disabled {
            background: #9ca3af;
            cursor: not-allowed;
        }

        /* Î∞òÏùëÌòï */
        @media (max-width: 768px) {
            .capture-content {
                margin: 1rem;
                padding: 1.5rem;
                max-width: none;
            }
            
            .capture-previews {
                grid-template-columns: 1fr;
                gap: 1.5rem;
            }
        }

        /* Î∞òÏùëÌòï */
        @media (max-width: 768px) {
            .main-layout {
                flex-direction: column;
                max-height: none;
                overflow: visible;
            }
            
            .editor-panel {
                width: 100%;
                min-width: auto;
                height: auto;
                position: relative;
            }
            
            .simulator-panel {
                width: 100%;
                min-width: auto;
                height: 60vh;
                position: relative;
                right: auto;
                top: auto;
            }
            
            .phone-frame {
                width: 240px;
                height: 480px;
            }
        }

        @media (min-width: 769px) {
            .main-layout {
                flex-direction: row !important;
            }
            
            .editor-panel {
                width: 50% !important;
                height: 100vh !important;
            }
            
            .simulator-panel {
                width: 50% !important;
                height: 100vh !important;
                position: fixed !important;
                right: 0 !important;
                top: 0 !important;
            }
        }
    
</style>
</head>
<body>
    <div class="main-layout">
        <!-- ========================================
             Ï¢åÏ∏° Ìé∏Ïßë Ìå®ÎÑê
        ======================================== -->
        <div class="editor-panel">
            <!-- Ìó§Îçî ÏòÅÏó≠ -->
            <div class="editor-header">
                <!-- Ï†úÎ™© ÏòÅÏó≠ (Ï¢åÏ∏° Ï†ïÎ†¨) -->
                <div class="header-content-section">
                    <div class="header-content">
                        <h1 class="header-title">üéØ ÏûòÍ≥†Î•∏ Î¶¨Î∑∞ ÏãúÎÆ¨Î†àÏù¥ÌÑ∞</h1>
                        <p class="header-subtitle">Ïã§ÏãúÍ∞ÑÏúºÎ°ú Í¥ëÍ≥† ÎèôÏûëÏùÑ ÌôïÏù∏ÌïòÍ≥† ÏΩòÌÖêÏ∏†Î•º Ìé∏ÏßëÌï¥Î≥¥ÏÑ∏Ïöî</p>
                    </div>
                </div>
                
                <!-- Î≤ÑÌäº ÏòÅÏó≠ (Ïö∞Ï∏° Ï†ïÎ†¨) -->
                <div class="header-buttons-section">
                    <div class="header-buttons">
                        <button class="btn btn-primary" onclick="App.exportData()" title="Í≥†ÎØºÎ≥Ñ Ï†úÌíà Îç∞Ïù¥ÌÑ∞Î•º CSVÎ°ú Îã§Ïö¥Î°úÎìú">
                            üìä CSV Îã§Ïö¥Î°úÎìú
                        </button>
                        <button class="btn btn-secondary" onclick="App.captureScreens()" title="ÌôîÎ©¥ GUIÎ•º PNGÎ°ú Îã§Ïö¥Î°úÎìú">
                            üì∏ ÌôîÎ©¥ Ï∫°Ï≤ò
                        </button>
                    </div>
                </div>
            </div>

            <!-- ÏΩòÌÖêÏ∏† ÏòÅÏó≠ -->
            <div class="editor-content">
                <!-- Í∞úÏÑ†Îêú ÏÇ¨Ïö© Í∞ÄÏù¥Îìú Ïπ¥Îìú -->
                <div class="workflow-card">
                    <div class="workflow-title">üìã ÏÇ¨Ïö© Í∞ÄÏù¥Îìú</div>
                    <div class="workflow-content">
                        <div class="workflow-step">
                            <strong>1Îã®Í≥Ñ:</strong> Î∏åÎûúÎìúÎ™ÖÍ≥º Ï†úÌíà Ï†ïÎ≥¥Î•º ÏûÖÎ†•ÌïòÏó¨ Í¥ëÍ≥† ÏãúÎÆ¨Î†àÏù¥ÏÖòÏùÑ ÌôïÏù∏Ìï¥Ï£ºÏÑ∏Ïöî
                        </div>
                        <div class="workflow-step">
                            <strong>2Îã®Í≥Ñ:</strong> ÎßåÏ°±Ïä§Îü¨Ïö¥ ÏÑ§Ï†ïÏù¥ ÏôÑÎ£åÎêòÎ©¥ 'CSV Îã§Ïö¥Î°úÎìú' Î≤ÑÌäºÏùÑ ÌÅ¥Î¶≠Ìï¥Ï£ºÏÑ∏Ïöî
                        </div>
                        <div class="workflow-step">
                            <strong>3Îã®Í≥Ñ:</strong> Îã§Ïö¥Î°úÎìúÎêú CSV ÌååÏùºÏùÑ Î≤ÑÏ¶àÎπå ÏÑ∏ÏùºÏ¶à Îß§ÎãàÏ†ÄÏóêÍ≤å Ïù¥Î©îÏùºÎ°ú Ï†ÑÎã¨Ìï¥Ï£ºÏÑ∏Ïöî
                        </div>
                        <div class="workflow-note">
                            ‚Äª CSV ÌååÏùºÏù¥ Ïã§Ï†ú Í¥ëÍ≥† Ïö¥ÏòÅ Í∏∞Ï§ÄÏù¥ Îê©ÎãàÎã§
                        </div>
                    </div>
                </div>

                <!-- Î∏åÎûúÎìúÎ™Ö ÏÑ§Ï†ï -->
                <div class="brand-input-section">
                    <label class="input-label" for="brandInput">
                        Î∏åÎûúÎìúÎ™Ö
                        <span class="tooltip-trigger" title="Î™®Îì† Ï†úÌíàÏóê Í≥µÌÜµÏúºÎ°ú Ï†ÅÏö©Îê©ÎãàÎã§">üí°</span>
                    </label>
                    <input type="text" class="form-input" id="brandInput" placeholder="Ïòà: Îã•ÌÑ∞ÏßÄ" value="Îã•ÌÑ∞ÏßÄ">
                </div>

                <!-- Ï†úÌíà Î™©Î°ù Ìé∏Ïßë -->
                <div class="product-section">
                    <div class="section-header">
                        <h3 class="section-title">
                            Ï†úÌíà Î™©Î°ù
                            <span class="tooltip-trigger" title="Í∞Å ÏÖÄÏùÑ ÌÅ¥Î¶≠Ìï¥ÏÑú Ï†úÌíà Ï†ïÎ≥¥Î•º ÏàòÏ†ïÌïòÏÑ∏Ïöî">üí°</span>
                        </h3>
                    </div>

                    <!-- Ï†úÌíà Ìé∏Ïßë ÌÖåÏù¥Î∏î -->
                    <div class="product-table-container">
                        <table class="product-table" id="productTable">
                            <thead>
                                <tr>
                                    <th style="width: 35%;">Ï†úÌíàÎ™Ö</th>
                                    <th style="width: 25%;">ÏÜåÍµ¨Ï†ê</th>
                                    <th style="width: 15%;">Í≥†ÎØº ÌÇ§ÏõåÎìú</th>
                                    <th style="width: 25%;">Ïù¥ÎØ∏ÏßÄURL</th>
                                </tr>
                            </thead>
                            <tbody id="productTableBody">
                                <!-- ÎèôÏ†ÅÏúºÎ°ú ÏÉùÏÑ±ÎêòÎäî Îç∞Ïù¥ÌÑ∞ ÌñâÎì§ -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <!-- ========================================
             Ïö∞Ï∏° ÏãúÎÆ¨Î†àÏù¥ÌÑ∞ Ìå®ÎÑê
        ======================================== -->
        <div class="simulator-panel">
            <div class="phone-frame">
                <div class="phone-screen">
                    <div class="simulator-container">
                        
                        <!-- Ï≤´ Î≤àÏß∏ ÌôîÎ©¥: ÏÑ†ÌÉù ÏòµÏÖò -->
                        <div id="mainScreen" class="screen main-screen">
                            <div class="title">ÏßÄÍ∏à ÎÇ¥ ÌîºÎ∂ÄÍ≥†ÎØºÏùÑ ÏÑ†ÌÉùÌïòÍ≥† 
Ïö©ÎèàÏùÑ Î∞õÏïÑÎ≥¥ÏÑ∏Ïöî!</div>
                            
                            <div class="options-grid" id="optionsGrid">
                                <!-- ÎèôÏ†ÅÏúºÎ°ú ÏÉùÏÑ±Îê® -->
                            </div>
                        </div>

                        <!-- Îëê Î≤àÏß∏ ÌôîÎ©¥: Î°úÎî© -->
                        <div id="loadingScreen" class="screen loading-screen hidden">
                            <div class="loading-title">AIÍ∞Ä ÎãπÏã†ÏóêÍ≤å ÎßûÎäî
Ï†úÌíàÏùÑ Ï∞æÍ≥† ÏûàÏñ¥Ïöî...</div>
                            
                            <div class="loading-container">
                                <div class="loading-spinner-container">
                                    <div class="loading-spinner"></div>
                                </div>
                                <span class="loading-text">Ï∂îÏ≤ú Ï†ïÎ¶¨ Ï§ë...</span>
                            </div>
                        </div>

                        <!-- ÏÑ∏ Î≤àÏß∏ ÌôîÎ©¥: ÏÉÅÌíà ÏÉÅÏÑ∏ -->
                        <div id="productScreen" class="screen product-screen hidden">
                            <button class="back-button" onclick="App.goBack()">
                                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32" fill="none">
                                    <path d="M20 26L10 16L20 6" stroke-linecap="round" stroke-linejoin="round"></path>
                                </svg>
                            </button>

                            <div class="review-container">
                                <div class="review-icon">üí≠</div>
                                <div class="review-content">
                                    <p class="review-text" id="reviewText"></p>
                                    <p class="rating" id="ratingText"></p>
                                    <p class="product-highlight" id="highlightText"></p>
                                </div>
                            </div>

                            <div class="spacer">
                                <div class="spacer-element"></div>
                            </div>

                            <div class="product-info">
                                <div class="product-image" id="productImage">
                                    <div class="product-placeholder">
                                        <div class="product-icon">üß¥</div>
                                        <div style="font-size: 0.5rem; color: #9ca3af;">Î∏åÎûúÎìú</div>
                                    </div>
                                </div>
                                <p class="product-name" id="productNameText"></p>
                            </div>

                            <button class="cta-button" onclick="App.handleCTA()">
                                <div class="cta-overlay"></div>
                                <p class="cta-text" id="ctaButtonText"></p>
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- AI ÏûêÎèôÏÉùÏÑ± ÏïàÎÇ¥ ÏïåÎ¶º (Î™®Î∞îÏùº ÌôîÎ©¥ Î∞ñ) -->
                <div class="ai-info-notice" id="aiInfoNotice">
                    <div class="ai-info-content">
                        <div class="ai-info-icon">ü§ñ</div>
                        <div class="ai-info-text">
                            <strong>AI ÏûêÎèôÏÉùÏÑ± Ï†ïÎ≥¥</strong><br>
                            Î¶¨Î∑∞ ÎÇ¥Ïö©Í≥º Î≥ÑÏ†ê Ï†ïÎ≥¥Îäî AIÍ∞Ä ÏûêÎèôÏúºÎ°ú ÏàòÏßë¬∑ÏÉùÏÑ±ÌïòÏó¨ Í¥ëÍ≥†Ïóê Ï†ÅÏö©Îê©ÎãàÎã§
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ÏóÖÎç∞Ïù¥Ìä∏ ÏïåÎ¶º -->
    <div class="update-notice" id="updateNotice">
        ‚ö° Ïã§ÏãúÍ∞Ñ ÏóÖÎç∞Ïù¥Ìä∏Îê®
    </div>

    <script>
const get = id => document.getElementById(id);
        // ÏÉòÌîå Îç∞Ïù¥ÌÑ∞ Ï†ïÏùò
        const SAMPLE_DATA = {
            concerns: ["ÎÑìÏùÄ Î™®Í≥µ", "ÎààÍ∞Ä¬∑ÌåîÏûê Îì±\nÍπäÏùÄ Ï£ºÎ¶Ñ", "Î©îÏù¥ÌÅ¨ÏóÖ Ïãú\nÎì§Îú®Îäî ÌîºÎ∂ÄÍ≤∞", "ÌîºÎ∂Ä ÌÉÑÎ†•"],
            review: "Ï†ïÎßê Ìö®Í≥ºÍ∞Ä Ï¢ãÏïÑÏöî! Íæ∏Ï§ÄÌûà ÏÇ¨Ïö©ÌïòÎãàÍπå ÌôïÏã§Ìûà Îã¨ÎùºÏßÑ ÎäêÎÇåÏûÖÎãàÎã§. Ï≤òÏùåÏóêÎäî Î∞òÏã†Î∞òÏùòÌñàÎäîÎç∞ 2Ï£º Ï†ïÎèÑ Ïì∞Í≥† ÎÇòÏÑúÎ∂ÄÌÑ∞ Î≥ÄÌôîÍ∞Ä ÎäêÍª¥ÏßÄÍ∏∞ ÏãúÏûëÌñàÏñ¥Ïöî. ÏßÄÍ∏àÏùÄ 3Í∞úÏõîÏß∏ ÏÇ¨Ïö©ÌïòÍ≥† ÏûàÎäîÎç∞ Ï£ºÎ≥ÄÏóêÏÑúÎèÑ Ï¢ãÏïÑÏ°åÎã§Îäî ÎßêÏùÑ ÎßéÏù¥ Îì§Ïñ¥Ïöî. Í∞ÄÍ≤©Ïù¥ Î∂ÄÎã¥Ïä§ÎüΩÍ∏¥ ÌïòÏßÄÎßå Í∑∏ÎßåÌïú Í∞ÄÏπòÍ∞Ä ÏûàÎã§Í≥† ÏÉùÍ∞ÅÌï¥Ïöî.",
            rating: "4.8/5 Ï†úÌíàÌèâ(1,234Í±¥)"
        };

        // Ï†ÑÏó≠ Ïï†ÌîåÎ¶¨ÏºÄÏù¥ÏÖò ÏÉÅÌÉú Í¥ÄÎ¶¨
        const AppState = {
            config: {
                commonBrand: "Îã•ÌÑ∞ÏßÄ",
                ctaText: "Ï†úÌíà Íµ¨Í≤ΩÌïòÍ≥† Ïö©Îèà Î∞õÍ∏∞",
                productCount: 4
            },
            products: {
                1: {
                    concern: SAMPLE_DATA.concerns[0],
                    productTitle: "Î†àÎìú Î∏îÎ†àÎØ∏Ïâ¨ ÌÅ¥Î¶¨Ïñ¥ ÏàòÎî© ÌÅ¨Î¶º 70ml",
                    productHighlight: "Î™®Í≥µ ÏºÄÏñ¥ & ÏßÑÏ†ï Ï†ÑÎ¨∏!",
                    imageUrl: "https://image.oliveyoung.co.kr/uploads/images/goods/400/10/0000/0020/A00000020679402ko.jpg",
                    productReview: SAMPLE_DATA.review,
                    rating: SAMPLE_DATA.rating
                },
                2: {
                    concern: SAMPLE_DATA.concerns[1],
                    productTitle: "Ïñ¥ÎìúÎ∞¥Ïä§Îìú ÎÇòÏù¥Ìä∏ Î¶¨ÌéòÏñ¥ ÏÑ∏Îüº 50ml",
                    productHighlight: "ÏïàÌã∞ÏóêÏù¥Ïßï & Ï£ºÎ¶Ñ Í∞úÏÑ†!",
                    imageUrl: "https://image.oliveyoung.co.kr/uploads/images/goods/400/10/0000/0019/A00000019800101ko.jpg",
                    productReview: SAMPLE_DATA.review,
                    rating: SAMPLE_DATA.rating
                },
                3: {
                    concern: SAMPLE_DATA.concerns[2],
                    productTitle: "ÎÑ§Ïò§ ÌååÏö¥Îç∞Ïù¥ÏÖò 30ml",
                    productHighlight: "Îß§ÎÅÑÎü¨Ïö¥ ÌîºÎ∂Ä ÌëúÌòÑ!",
                    imageUrl: "https://image.oliveyoung.co.kr/uploads/images/goods/400/10/0000/0018/A00000018965101ko.jpg",
                    productReview: SAMPLE_DATA.review,
                    rating: SAMPLE_DATA.rating
                },
                4: {
                    concern: SAMPLE_DATA.concerns[3],
                    productTitle: "ÌéòÏù¥ÏÖú Ìä∏Î¶¨Ìä∏Î®ºÌä∏ ÏóêÏÑºÏä§ 230ml",
                    productHighlight: "ÌîÑÎ¶¨ÎØ∏ÏóÑ ÌÉÑÎ†• ÏºÄÏñ¥!",
                    imageUrl: "https://image.oliveyoung.co.kr/uploads/images/goods/400/10/0000/0015/A00000015234101ko.jpg",
                    productReview: SAMPLE_DATA.review,
                    rating: SAMPLE_DATA.rating
                }
            },
            currentProduct: 1,
            currentScreen: 'main'
        };

        // Ïª§ÏÑú ÏúÑÏπò Í¥ÄÎ¶¨ Ïú†Ìã∏Î¶¨Ìã∞
        const CursorUtils = {
            // Ïª§ÏÑúÎ•º ÌÖçÏä§Ìä∏ ÎÅùÏúºÎ°ú Ïù¥Îèô
            setCursorToEnd: function(element) {
                element.focus();
                if (window.getSelection && document.createRange) {
                    const range = document.createRange();
                    const sel = window.getSelection();
                    
                    // ÌÖçÏä§Ìä∏ ÎÖ∏ÎìúÍ∞Ä ÏûàÎäî Í≤ΩÏö∞ ÎÅùÏúºÎ°ú Ïù¥Îèô
                    if (element.childNodes.length > 0) {
                        const lastNode = element.childNodes[element.childNodes.length - 1];
                        if (lastNode.nodeType === Node.TEXT_NODE) {
                            range.setStart(lastNode, lastNode.textContent.length);
                        } else {
                            range.setStartAfter(lastNode);
                        }
                    } else {
                        range.setStart(element, 0);
                    }
                    
                    range.collapse(true);
                    sel.removeAllRanges();
                    sel.addRange(range);
                }
            },

            // Ï†ÑÏ≤¥ ÌÖçÏä§Ìä∏ ÏÑ†ÌÉù
            selectAll: function(element) {
                element.focus();
                if (window.getSelection && document.createRange) {
                    const range = document.createRange();
                    const sel = window.getSelection();
                    range.selectNodeContents(element);
                    sel.removeAllRanges();
                    sel.addRange(range);
                }
            }
        };

        // ÌÖåÏù¥Î∏î Í¥ÄÎ¶¨ Î™®Îìà
        const TableManager = {
            currentEditingCell: null,
            
            createTable: function() {
                const tbody = get('productTableBody');
                tbody.innerHTML = '';
                
                for (let i = 1; i <= AppState.config.productCount; i++) {
                    const product = AppState.products[i];
                    const row = document.createElement('tr');
                    
                    // Ï†úÌíàÎ™Ö ÏÖÄ (1Î≤àÏß∏)
                    const titleCell = document.createElement('td');
                    titleCell.className = 'editable-cell' + (i === AppState.currentProduct ? ' active' : '');
                    titleCell.contentEditable = 'true';
                    titleCell.dataset.field = 'productTitle';
                    titleCell.dataset.product = i;
                    titleCell.textContent = product.productTitle || 'Ï†úÌíàÎ™ÖÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî';
                    if (!product.productTitle) {
                        titleCell.classList.add('empty');
                    }
                    
                    // ÏÜåÍµ¨Ï†ê ÏÖÄ (2Î≤àÏß∏) 
                    const highlightCell = document.createElement('td');
                    highlightCell.className = 'editable-cell' + (i === AppState.currentProduct ? ' active' : '');
                    highlightCell.contentEditable = 'true';
                    highlightCell.dataset.field = 'productHighlight';
                    highlightCell.dataset.product = i;
                    highlightCell.textContent = product.productHighlight || 'ÏÜåÍµ¨Ï†êÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî';
                    if (!product.productHighlight) {
                        highlightCell.classList.add('empty');
                    }
                    
                    // Í≥†ÎØº ÌÇ§ÏõåÎìú ÏÖÄ (3Î≤àÏß∏)
                    const concernCell = document.createElement('td');
                    concernCell.className = 'editable-cell concern-cell' + (i === AppState.currentProduct ? ' active' : '');
                    concernCell.contentEditable = 'true';
                    concernCell.dataset.field = 'concern';
                    concernCell.dataset.product = i;
                    concernCell.textContent = product.concern || 'Í≥†ÎØº ÌÇ§ÏõåÎìú ÏûÖÎ†•';
                    if (!product.concern) {
                        concernCell.classList.add('empty');
                    }
                    
                    // Ïù¥ÎØ∏ÏßÄURL ÏÖÄ (4Î≤àÏß∏)
                    const urlCell = document.createElement('td');
                    urlCell.className = 'editable-cell url-cell' + (i === AppState.currentProduct ? ' active' : '');
                    urlCell.contentEditable = 'true';
                    urlCell.dataset.field = 'imageUrl';
                    urlCell.dataset.product = i;
                    urlCell.textContent = product.imageUrl || 'URLÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî';
                    if (!product.imageUrl) {
                        urlCell.classList.add('empty');
                    }
                    
                    row.appendChild(titleCell);
                    row.appendChild(highlightCell);
                    row.appendChild(concernCell);
                    row.appendChild(urlCell);
                    tbody.appendChild(row);
                }
                
                this.attachEventListeners();
            },
            
            attachEventListeners: function() {
                const editableCells = document.querySelectorAll('.editable-cell');
                
                editableCells.forEach(cell => {
                    // ÌÅ¥Î¶≠ Ïù¥Î≤§Ìä∏
                    cell.addEventListener('click', (e) => {
                        this.handleCellClick(e.target);
                    });
                    
                    // Ìè¨Ïª§Ïä§ Ïù¥Î≤§Ìä∏
                    cell.addEventListener('focus', (e) => {
                        this.handleCellFocus(e.target);
                    });
                    
                    // Î∏îÎü¨ Ïù¥Î≤§Ìä∏ (Ìè¨Ïª§Ïä§ ÏûÉÏùÑ Îïå)
                    cell.addEventListener('blur', (e) => {
                        this.handleCellBlur(e.target);
                    });
                    
                    // ÌÇ§Îã§Ïö¥ Ïù¥Î≤§Ìä∏
                    cell.addEventListener('keydown', (e) => {
                        this.handleKeyDown(e, e.target);
                    });
                    
                    // ÏûÖÎ†• Ïù¥Î≤§Ìä∏
                    cell.addEventListener('input', (e) => {
                        this.handleCellInput(e.target);
                    });
                });
            },
            
            handleCellClick: function(cell) {
                const productNum = parseInt(cell.dataset.product);
                this.switchToProduct(productNum);
                
                // Îπà ÏÖÄÏù∏ Í≤ΩÏö∞ ÌîåÎ†àÏù¥Ïä§ÌôÄÎçî ÌÖçÏä§Ìä∏ Ï†úÍ±∞
                if (cell.classList.contains('empty')) {
                    cell.textContent = '';
                    cell.classList.remove('empty');
                }
                
                // ÏïΩÍ∞ÑÏùò ÏßÄÏó∞ ÌõÑ Ïª§ÏÑúÎ•º ÎÅùÏúºÎ°ú Ïù¥Îèô
                setTimeout(() => {
                    CursorUtils.setCursorToEnd(cell);
                }, 10);
            },
            
            handleCellFocus: function(cell) {
                this.currentEditingCell = cell;
                
                // Îπà ÏÖÄÏù∏ Í≤ΩÏö∞ ÌîåÎ†àÏù¥Ïä§ÌôÄÎçî ÌÖçÏä§Ìä∏ Ï†úÍ±∞
                if (cell.classList.contains('empty')) {
                    cell.textContent = '';
                    cell.classList.remove('empty');
                }
            },
            
            handleCellBlur: function(cell) {
                this.saveCell(cell);
                this.currentEditingCell = null;
            },
            
            handleKeyDown: function(e, cell) {
                if (e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    cell.blur(); // Ï†ÄÏû•ÌïòÍ≥† Ìé∏Ïßë Ï¢ÖÎ£å
                } else if (e.key === 'Escape') {
                    e.preventDefault();
                    this.cancelEdit(cell);
                } else if (e.key === 'Tab') {
                    e.preventDefault();
                    this.moveToNextCell(cell, e.shiftKey);
                } else if (e.ctrlKey && e.key === 'a') {
                    e.preventDefault();
                    CursorUtils.selectAll(cell);
                }
            },
            
            handleCellInput: function(cell) {
                // Ïã§ÏãúÍ∞ÑÏúºÎ°ú Îç∞Ïù¥ÌÑ∞ ÏóÖÎç∞Ïù¥Ìä∏ÌïòÏßÄ ÏïäÍ≥† blur ÏãúÏ†êÏóêÎßå Ï†ÄÏû•
                // ÌïòÏßÄÎßå Îπà ÏÉÅÌÉú Ï≤¥ÌÅ¨Îäî Ïã§ÏãúÍ∞ÑÏúºÎ°ú
                if (cell.textContent.trim() === '') {
                    if (!cell.classList.contains('empty')) {
                        cell.classList.add('empty');
                    }
                } else {
                    if (cell.classList.contains('empty')) {
                        cell.classList.remove('empty');
                    }
                }
            },
            
            saveCell: function(cell) {
                const field = cell.dataset.field;
                const productNum = parseInt(cell.dataset.product);
                const value = cell.textContent.trim();
                
                // Îπà Í∞íÏù∏ Í≤ΩÏö∞ ÌîåÎ†àÏù¥Ïä§ÌôÄÎçî ÌÖçÏä§Ìä∏ Î≥µÏõê
                if (!value) {
                    const placeholders = {
                        productTitle: 'Ï†úÌíàÎ™ÖÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî',
                        productHighlight: 'ÏÜåÍµ¨Ï†êÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî',
                        concern: 'Í≥†ÎØº ÌÇ§ÏõåÎìú ÏûÖÎ†•',
                        imageUrl: 'URLÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî'
                    };
                    cell.textContent = placeholders[field];
                    cell.classList.add('empty');
                    AppState.products[productNum][field] = '';
                } else {
                    AppState.products[productNum][field] = value;
                    cell.classList.remove('empty');
                }
                
                // ÌòÑÏû¨ Ï†úÌíàÏù∏ Í≤ΩÏö∞ ÏãúÎÆ¨Î†àÏù¥ÌÑ∞ ÏóÖÎç∞Ïù¥Ìä∏
                if (productNum === AppState.currentProduct) {
                    SimulatorController.update.options();
                    if (AppState.currentScreen === 'product') {
                        SimulatorController.update.productDetail(productNum);
                    }
                } else {
                    SimulatorController.update.options();
                }
                
                Utils.showNotice();
            },
            
            cancelEdit: function(cell) {
                const field = cell.dataset.field;
                const productNum = parseInt(cell.dataset.product);
                const originalValue = AppState.products[productNum][field];
                
                if (originalValue) {
                    cell.textContent = originalValue;
                    cell.classList.remove('empty');
                } else {
                    const placeholders = {
                        productTitle: 'Ï†úÌíàÎ™ÖÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî',
                        productHighlight: 'ÏÜåÍµ¨Ï†êÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî',
                        concern: 'Í≥†ÎØº ÌÇ§ÏõåÎìú ÏûÖÎ†•',
                        imageUrl: 'URLÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî'
                    };
                    cell.textContent = placeholders[field];
                    cell.classList.add('empty');
                }
                
                cell.blur();
            },
            
            moveToNextCell: function(currentCell, reverse = false) {
                const allCells = Array.from(document.querySelectorAll('.editable-cell'));
                const currentIndex = allCells.indexOf(currentCell);
                
                let nextIndex;
                if (reverse) {
                    nextIndex = currentIndex > 0 ? currentIndex - 1 : allCells.length - 1;
                } else {
                    nextIndex = currentIndex < allCells.length - 1 ? currentIndex + 1 : 0;
                }
                
                const nextCell = allCells[nextIndex];
                if (nextCell) {
                    currentCell.blur();
                    nextCell.focus();
                }
            },
            
            switchToProduct: function(productNum) {
                AppState.currentProduct = productNum;
                
                // Î™®Îì† ÏÖÄÏùò active Ïä§ÌÉÄÏùº Ï†úÍ±∞
                document.querySelectorAll('.editable-cell').forEach(cell => {
                    cell.classList.remove('active');
                });
                
                // ÏÑ†ÌÉùÎêú Ï†úÌíàÏùò ÏÖÄÎì§Ïóê active ÌÅ¥ÎûòÏä§ Ï∂îÍ∞Ä
                document.querySelectorAll(`[data-product="${productNum}"]`).forEach(cell => {
                    cell.classList.add('active');
                });
                
                // ÏãúÎÆ¨Î†àÏù¥ÌÑ∞ ÏóÖÎç∞Ïù¥Ìä∏
                SimulatorController.update.options();
                if (AppState.currentScreen === 'product') {
                    SimulatorController.update.productDetail(productNum);
                }
                
                Utils.showNotice(`üì± ${productNum}Î≤à Ï†úÌíàÏúºÎ°ú ÎØ∏Î¶¨Î≥¥Í∏∞ Ï†ÑÌôòÎê®`);
            }
        };

        // UI Ïª¥Ìè¨ÎÑåÌä∏ ÏÉùÏÑ± Î™®Îìà
        const UIComponents = {
            createPlaceholder: function(brandName) {
                const placeholder = document.createElement('div');
                placeholder.className = 'product-placeholder';
                
                const icon = document.createElement('div');
                icon.className = 'product-icon';
                icon.textContent = 'üß¥';
                
                const brand = document.createElement('div');
                brand.style.fontSize = '0.5rem';
                brand.style.color = '#9ca3af';
                brand.textContent = brandName;
                
                placeholder.appendChild(icon);
                placeholder.appendChild(brand);
                
                return placeholder;
            }
        };

        // ÏãúÎÆ¨Î†àÏù¥ÌÑ∞ Ï†úÏñ¥ Î™®Îìà
        const SimulatorController = {
            update: {
                options: function() {
                    const grid = get('optionsGrid');
                    grid.innerHTML = '';
                    
                    for (let i = 1; i <= AppState.config.productCount; i++) {
                        const product = AppState.products[i];
                        const button = document.createElement('button');
                        button.className = 'option-button';
                        button.setAttribute('data-option', i);
                        button.setAttribute('aria-label', 'Í≥†ÎØº ' + i + ' ÏÑ†ÌÉùÌïòÍ∏∞');
                        button.innerHTML = '<span class="option-text">' + (product.concern || ('Í≥†ÎØº ' + i)) + '</span>';
                        button.addEventListener('click', function() {
                            SimulatorController.selectOption(i);
                        });
                        grid.appendChild(button);
                    }
                },
                
                productDetail: function(productNum) {
                    const product = AppState.products[productNum];
                    const brand = AppState.config.commonBrand;
                    
                    get('reviewText').textContent = product.productReview || '';
                    get('ratingText').textContent = product.rating || '';
                    get('highlightText').textContent = product.productHighlight || '';
                    get('productNameText').textContent = brand + '\n' + product.productTitle;
                    get('ctaButtonText').textContent = AppState.config.ctaText;
                    
                    SimulatorController.update.productImage(product, brand);
                },
                
                productImage: function(product, brand) {
                    const container = get('productImage');
                    container.innerHTML = '';
                    
                    if (product.imageUrl && product.imageUrl.trim()) {
                        const img = document.createElement('img');
                        img.src = product.imageUrl;
                        img.alt = product.productTitle || 'Ï†úÌíà Ïù¥ÎØ∏ÏßÄ';
                        img.style.width = '100%';
                        img.style.height = '100%';
                        img.style.objectFit = 'cover';
                        
                        img.onerror = function() {
                            container.innerHTML = '';
                            container.appendChild(UIComponents.createPlaceholder(brand));
                        };
                        
                        container.appendChild(img);
                    } else {
                        container.appendChild(UIComponents.createPlaceholder(brand));
                    }
                }
            },
            
            showScreen: function(screenName) {
                document.querySelectorAll('.screen').forEach(function(screen) {
                    screen.classList.add('hidden');
                });
                document.getElementById(screenName + 'Screen').classList.remove('hidden');
                AppState.currentScreen = screenName;
            },
            
            selectOption: function(productNum) {
                SimulatorController.showScreen('loading');
                setTimeout(function() {
                    SimulatorController.update.productDetail(productNum);
                    SimulatorController.showScreen('product');
                    
                    // Ï†úÌíà ÏÉÅÏÑ∏ ÌôîÎ©¥ ÏßÑÏûÖ Ïãú AI ÏïàÎÇ¥ ÏïåÎ¶º ÌëúÏãú
                    setTimeout(function() {
                        const aiNotice = get('aiInfoNotice');
                        if (aiNotice) {
                            aiNotice.classList.add('show');
                            
                            // 5Ï¥à ÌõÑ ÏûêÎèôÏúºÎ°ú Ïà®ÍπÄ
                            setTimeout(function() {
                                aiNotice.classList.remove('show');
                            }, 5000);
                        }
                    }, 1000);
                }, 2000);
            }
        };

        // Îç∞Ïù¥ÌÑ∞ Í¥ÄÎ¶¨ Î™®Îìà
        const DataManager = {
            save: {
                brand: function() {
                    AppState.config.commonBrand = get('brandInput').value;
                },
                
                allProducts: function() {
                    if (TableManager.currentEditingCell) {
                        TableManager.saveCell(TableManager.currentEditingCell);
                    }
                }
            },
            
            load: {
                brand: function() {
                    get('brandInput').value = AppState.config.commonBrand;
                }
            },
            
            reset: function() {
                AppState.config.commonBrand = "Îã•ÌÑ∞ÏßÄ";
                AppState.currentProduct = 1;
                AppState.currentScreen = 'main';
                
                const defaultProducts = {
                    1: {
                        concern: SAMPLE_DATA.concerns[0],
                        productTitle: "Î†àÎìú Î∏îÎ†àÎØ∏Ïâ¨ ÌÅ¥Î¶¨Ïñ¥ ÏàòÎî© ÌÅ¨Î¶º 70ml",
                        productHighlight: "Î™®Í≥µ ÏºÄÏñ¥ & ÏßÑÏ†ï Ï†ÑÎ¨∏!",
                        imageUrl: "https://image.oliveyoung.co.kr/uploads/images/goods/400/10/0000/0020/A00000020679402ko.jpg",
                        productReview: SAMPLE_DATA.review,
                        rating: SAMPLE_DATA.rating
                    },
                    2: {
                        concern: SAMPLE_DATA.concerns[1],
                        productTitle: "Ïñ¥ÎìúÎ∞¥Ïä§Îìú ÎÇòÏù¥Ìä∏ Î¶¨ÌéòÏñ¥ ÏÑ∏Îüº 50ml",
                        productHighlight: "ÏïàÌã∞ÏóêÏù¥Ïßï & Ï£ºÎ¶Ñ Í∞úÏÑ†!",
                        imageUrl: "https://image.oliveyoung.co.kr/uploads/images/goods/400/10/0000/0019/A00000019800101ko.jpg",
                        productReview: SAMPLE_DATA.review,
                        rating: SAMPLE_DATA.rating
                    },
                    3: {
                        concern: SAMPLE_DATA.concerns[2],
                        productTitle: "ÎÑ§Ïò§ ÌååÏö¥Îç∞Ïù¥ÏÖò 30ml",
                        productHighlight: "Îß§ÎÅÑÎü¨Ïö¥ ÌîºÎ∂Ä ÌëúÌòÑ!",
                        imageUrl: "https://image.oliveyoung.co.kr/uploads/images/goods/400/10/0000/0018/A00000018965101ko.jpg",
                        productReview: SAMPLE_DATA.review,
                        rating: SAMPLE_DATA.rating
                    },
                    4: {
                        concern: SAMPLE_DATA.concerns[3],
                        productTitle: "ÌéòÏù¥ÏÖú Ìä∏Î¶¨Ìä∏Î®ºÌä∏ ÏóêÏÑºÏä§ 230ml",
                        productHighlight: "ÌîÑÎ¶¨ÎØ∏ÏóÑ ÌÉÑÎ†• ÏºÄÏñ¥!",
                        imageUrl: "https://image.oliveyoung.co.kr/uploads/images/goods/400/10/0000/0015/A00000015234101ko.jpg",
                        productReview: SAMPLE_DATA.review,
                        rating: SAMPLE_DATA.rating
                    }
                };
                
                AppState.products = {};
                for (let key in defaultProducts) {
                    AppState.products[key] = defaultProducts[key];
                }
            }
        };

        // Ïù¥Î≤§Ìä∏ Í¥ÄÎ¶¨ Î™®Îìà  
        const EventManager = {
            init: function() {
                get('brandInput').addEventListener('input', function() {
                    DataManager.save.brand();
                    SimulatorController.update.options();
                    Utils.showNotice();
                });
                
                // Ï†ÑÏó≠ ÌÇ§Î≥¥Îìú Ïù¥Î≤§Ìä∏
                document.addEventListener('keydown', function(e) {
                    if (e.key === 'Escape' && TableManager.currentEditingCell) {
                        TableManager.cancelEdit(TableManager.currentEditingCell);
                    }
                });
                
                // Ï†ÑÏó≠ ÌÅ¥Î¶≠ Ïù¥Î≤§Ìä∏ (Ìé∏Ïßë Ï∑®ÏÜåÏö©)
                document.addEventListener('click', function(e) {
                    if (TableManager.currentEditingCell && 
                        !TableManager.currentEditingCell.contains(e.target) &&
                        !e.target.classList.contains('editable-cell')) {
                        TableManager.currentEditingCell.blur();
                    }
                });
            }
        };

        // Ïú†Ìã∏Î¶¨Ìã∞ Î™®Îìà
        const Utils = {
            showNotice: function(message) {
                message = message || '‚ö° Ïã§ÏãúÍ∞Ñ ÏóÖÎç∞Ïù¥Ìä∏Îê®';
                const notice = get('updateNotice');
                notice.textContent = message;
                notice.classList.add('show');
                setTimeout(function() {
                    notice.classList.remove('show');
                }, 3000);
            },
            
            generateCSV: function() {
                const headers = [
                    'Í≥†ÎØºÎ≤àÌò∏',
                    'ÌîºÎ∂ÄÍ≥†ÎØº',
                    'Î∏åÎûúÎìúÎ™Ö',
                    'Ï†úÌíàÎ™Ö',
                    'Í≥†Í∞ùÎ¶¨Î∑∞',
                    'Î≥ÑÏ†êÏ†ïÎ≥¥',
                    'Ï†úÌíàÌäπÏßï',
                    'ÏÉÅÌíàÏù¥ÎØ∏ÏßÄURL'
                ];
                
                const csvData = [headers.join(',')];
                
                for (let i = 1; i <= AppState.config.productCount; i++) {
                    const product = AppState.products[i];
                    const row = [
                        i,
                        '"' + (product.concern || '').replace(/"/g, '""').replace(/\n/g, ' ') + '"',
                        '"' + AppState.config.commonBrand.replace(/"/g, '""') + '"',
                        '"' + (product.productTitle || '').replace(/"/g, '""') + '"',
                        '"' + (product.productReview || '').replace(/"/g, '""').replace(/\n/g, ' ') + '"',
                        '"' + (product.rating || '').replace(/"/g, '""') + '"',
                        '"' + (product.productHighlight || '').replace(/"/g, '""') + '"',
                        '"' + (product.imageUrl || '').replace(/"/g, '""') + '"'
                    ];
                    csvData.push(row.join(','));
                }
                
                return csvData.join('\n');
            },
            
            downloadFile: function(content, filename, type) {
                type = type || 'text/csv';
                const blob = content instanceof Blob ? content : new Blob(['\uFEFF' + content], { type: type + ';charset=utf-8;' });
                const link = document.createElement('a');
                
                if (link.download !== undefined) {
                    const url = URL.createObjectURL(blob);
                    link.setAttribute('href', url);
                    link.setAttribute('download', filename);
                    link.style.visibility = 'hidden';
                    document.body.appendChild(link);
                    link.click();
                    document.body.removeChild(link);
                    URL.revokeObjectURL(url);
                    return true;
                }
                return false;
            }
        };

        // Î©îÏù∏ Ïï†ÌîåÎ¶¨ÏºÄÏù¥ÏÖò Í∞ùÏ≤¥
        const App = {
            init: function() {
                DataManager.load.brand();
                TableManager.createTable();
                SimulatorController.update.options();
                EventManager.init();
            },
            
            goBack: function() {
                SimulatorController.showScreen('main');
            },
            
            handleCTA: function() {
                alert('CTA Î≤ÑÌäºÏù¥ ÌÅ¥Î¶≠ÎêòÏóàÏäµÎãàÎã§!');
            },
            
            reset: function() {
                DataManager.reset();
                AppState.currentProduct = 1;
                
                DataManager.load.brand();
                TableManager.createTable();
                SimulatorController.update.options();
                SimulatorController.showScreen('main');
                
                Utils.showNotice('üîÑ Ï¥àÍ∏∞Í∞íÏúºÎ°ú Î¶¨ÏÖãÎêòÏóàÏäµÎãàÎã§!');
            },
            
            exportData: function() {
                DataManager.save.allProducts();
                DataManager.save.brand();
                
                const csvContent = Utils.generateCSV();
                const now = new Date();
                const dateStr = now.toISOString().slice(0, 19).replace(/[:-]/g, '').replace('T', '_');
                const filename = AppState.config.commonBrand + '_BuzzAd_ÏûòÍ≥†Î•∏Î¶¨Î∑∞_Í¥ëÍ≥†Îç∞Ïù¥ÌÑ∞_' + dateStr + '.csv';
                
                if (Utils.downloadFile(csvContent, filename)) {
                    Utils.showNotice('üìä CSV ÌååÏùºÏù¥ Îã§Ïö¥Î°úÎìúÎêòÏóàÏäµÎãàÎã§!');
                } else {
                    alert('Î∏åÎùºÏö∞Ï†ÄÏóêÏÑú ÌååÏùº Îã§Ïö¥Î°úÎìúÎ•º ÏßÄÏõêÌïòÏßÄ ÏïäÏäµÎãàÎã§.');
                }
            },
            
            captureScreens: function() {
                // HTML2Canvas ÎùºÏù¥Î∏åÎü¨Î¶¨ Î°úÎìú
                if (!window.html2canvas) {
                    const script = document.createElement('script');
                    script.src = 'https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js';
                    script.onload = () => {
                        this.performCapture();
                    };
                    document.head.appendChild(script);
                } else {
                    this.performCapture();
                }
            },

            performCapture: function() {
                Utils.showNotice('üì∏ ÌôîÎ©¥ Ï∫°Ï≤ò Ï§ë...');
                
                // ÏãúÎÆ¨Î†àÏù¥ÌÑ∞ ÌôîÎ©¥Îßå Ï∫°Ï≤ò
                const phoneScreen = document.querySelector('.phone-screen');
                
                html2canvas(phoneScreen, {
                    backgroundColor: '#ffffff',
                    scale: 2, // Í≥†Ìï¥ÏÉÅÎèÑ
                    useCORS: true,
                    allowTaint: true,
                    logging: false,
                    width: phoneScreen.offsetWidth,
                    height: phoneScreen.offsetHeight
                }).then(canvas => {
                    // CanvasÎ•º Ïù¥ÎØ∏ÏßÄÎ°ú Î≥ÄÌôò
                    const link = document.createElement('a');
                    const now = new Date();
                    const dateStr = now.toISOString().slice(0, 19).replace(/[:-]/g, '').replace('T', '_');
                    const filename = `${AppState.config.commonBrand}_ÏûòÍ≥†Î•∏Î¶¨Î∑∞_ÏãúÎÆ¨Î†àÏù¥ÌÑ∞_${dateStr}.png`;
                    
                    link.download = filename;
                    link.href = canvas.toDataURL('image/png');
                    link.click();
                    
                    Utils.showNotice('üì∏ ÌôîÎ©¥ Ï∫°Ï≤òÍ∞Ä ÏôÑÎ£åÎêòÏóàÏäµÎãàÎã§!');
                }).catch(error => {
                    console.error('Ï∫°Ï≤ò Ïò§Î•ò:', error);
                    Utils.showNotice('‚ùå ÌôîÎ©¥ Ï∫°Ï≤ò Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§');
                });
            }
        };

        // ÌéòÏù¥ÏßÄ Î°úÎìú Ïãú Ï¥àÍ∏∞Ìôî
        document.addEventListener('DOMContentLoaded', App.init);
    </script>
<div class="capture-modal hidden" id="captureModal">
<div class="capture-overlay"></div>
<div class="capture-content">
<div class="capture-header">
<h3>üì∏ ÌôîÎ©¥ Ï∫°Ï≤ò</h3>
<button class="capture-close" onclick="closeCaptureModal()">√ó</button>
</div>
<div class="capture-progress">
<div class="progress-bar">
<div class="progress-fill" id="progressFill"></div>
</div>
<div class="progress-text" id="progressText">ZIP ÌååÏùºÎ°ú Îã§Ïö¥Î°úÎìúÌï† ÌôîÎ©¥ÏùÑ ÌôïÏù∏Ìï¥Ï£ºÏÑ∏Ïöî</div>
</div>
<div class="capture-previews">
<div class="preview-container">
<div class="preview-title">Í≥†ÎØº ÏÑ†ÌÉù ÌôîÎ©¥</div>
<div class="preview-frame" id="previewFrame1">
<div class="preview-loading">Î°úÎî© Ï§ë...</div>
</div>
<div class="preview-status" id="status1">Ï§ÄÎπÑ Ï§ë</div>
</div>
<div class="preview-container">
<div class="preview-title">Ï†úÌíà ÏÉÅÏÑ∏ ÌôîÎ©¥</div>
<div class="preview-frame" id="previewFrame2">
<div class="preview-loading">Î°úÎî© Ï§ë...</div>
</div>
<div class="preview-status" id="status2">Ï§ÄÎπÑ Ï§ë</div>
</div>
</div>
<div class="capture-actions">
<button class="capture-button" id="captureButton" onclick="startCapture()" style="display: none;">
                        Ï∫°Ï≤ò ÏãúÏûë
                    </button>
</div>
</div>
</div>
<script id="legacy-capture-js">

        // Ï†ÑÏó≠ Ìï®ÏàòÎ°ú Ï∫°Ï≤ò Î™®Îã¨ Ïó¥Í∏∞
        window.testButtonClick = function() {
            openCaptureModal();
        };

        // Ï∫°Ï≤ò Î™®Îã¨ Ïó¥Í∏∞
        function openCaptureModal() {
            // ÌòÑÏû¨ Îç∞Ïù¥ÌÑ∞ Ï†ÄÏû•
            saveCurrentProductData();
            
            // Î™®Îã¨ ÌëúÏãú
            get('captureModal').classList.remove('hidden');
            
            // ÌîÑÎ°úÍ∑∏Î†àÏä§ Ï¥àÍ∏∞Ìôî
            updateProgress(0, 'ÎØ∏Î¶¨Î≥¥Í∏∞Î•º ÏÉùÏÑ±ÌïòÍ≥† ÏûàÏäµÎãàÎã§...');
            
            // ÏÉÅÌÉú Ï¥àÍ∏∞Ìôî
            get('status1').textContent = 'Ï§ÄÎπÑ Ï§ë';
            get('status2').textContent = 'Ï§ÄÎπÑ Ï§ë';
            get('captureButton').disabled = false;
            
            // html2canvas ÎùºÏù¥Î∏åÎü¨Î¶¨ Î°úÎìú
            loadHtml2Canvas().then(() => {
                // ÎØ∏Î¶¨Î≥¥Í∏∞ ÏÉùÏÑ±
                generatePreviews();
            });
        }

        // Ï∫°Ï≤ò Î™®Îã¨ Îã´Í∏∞
        function closeCaptureModal() {
            get('captureModal').classList.add('hidden');
        }

        // ÌîÑÎ°úÍ∑∏Î†àÏä§ ÏóÖÎç∞Ïù¥Ìä∏
        function updateProgress(percentage, text) {
            get('progressFill').style.width = percentage + '%';
            get('progressText').textContent = text;
        }

        // ÎØ∏Î¶¨Î≥¥Í∏∞ ÏÉùÏÑ±
        async function generatePreviews() {
            try {
                updateProgress(25, 'Í≥†ÎØº ÏÑ†ÌÉù ÌôîÎ©¥ ÎØ∏Î¶¨Î≥¥Í∏∞ ÏÉùÏÑ± Ï§ë...');
                
                // 1. Î©îÏù∏ ÌôîÎ©¥ ÎØ∏Î¶¨Î≥¥Í∏∞ ÏÉùÏÑ±
                const mainPreview = await generateMainPreview();
                get('previewFrame1').innerHTML = '';
                get('previewFrame1').appendChild(mainPreview);
                get('status1').textContent = 'ÎØ∏Î¶¨Î≥¥Í∏∞ ÏôÑÎ£å';
                get('status1').className = 'preview-status completed';
                
                updateProgress(50, 'Ï†úÌíà ÏÉÅÏÑ∏ ÌôîÎ©¥ ÎØ∏Î¶¨Î≥¥Í∏∞ ÏÉùÏÑ± Ï§ë...');
                
                // 2. Ï†úÌíà ÏÉÅÏÑ∏ ÌôîÎ©¥ ÎØ∏Î¶¨Î≥¥Í∏∞ ÏÉùÏÑ±
                const productPreview = await generateProductPreview();
                get('previewFrame2').innerHTML = '';
                get('previewFrame2').appendChild(productPreview);
                get('status2').textContent = 'ÎØ∏Î¶¨Î≥¥Í∏∞ ÏôÑÎ£å';
                get('status2').className = 'preview-status completed';
                
                updateProgress(75, 'ÎØ∏Î¶¨Î≥¥Í∏∞ ÏôÑÎ£å! ÏûêÎèôÏúºÎ°ú Ï∫°Ï≤òÎ•º ÏãúÏûëÌï©ÎãàÎã§...');
                
                // Ï∫°Ï≤ò Î≤ÑÌäº Ïà®Í∏∞Í∏∞
                get('captureButton').style.display = 'none';
                
                // 1Ï¥à ÌõÑ ÏûêÎèôÏúºÎ°ú Ï∫°Ï≤ò ÏãúÏûë
                setTimeout(() => {
                    startAutoCapture();
                }, 1000);
                
            } catch (error) {
                console.error('ÎØ∏Î¶¨Î≥¥Í∏∞ ÏÉùÏÑ± Ïò§Î•ò:', error);
                updateProgress(0, 'ÎØ∏Î¶¨Î≥¥Í∏∞ ÏÉùÏÑ± Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§');
            }
        }

        // ÏûêÎèô Ï∫°Ï≤ò ÏãúÏûë (ZIP Îã§Ïö¥Î°úÎìú Î∞©Ïãù)
        async function startAutoCapture() {
            try {
                updateProgress(80, 'ZIP ÌååÏùº ÏÉùÏÑ±ÏùÑ ÏúÑÌïú Ïù¥ÎØ∏ÏßÄ Ï∫°Ï≤ò Ï§ë...');
                
                // JSZip ÎùºÏù¥Î∏åÎü¨Î¶¨ Î°úÎìú
                await loadJSZip();
                
                // ÏÉÅÌÉú ÏóÖÎç∞Ïù¥Ìä∏
                get('status1').textContent = 'Ï∫°Ï≤ò Ï§ë...';
                get('status1').className = 'preview-status processing';
                get('status2').textContent = 'Ï∫°Ï≤ò Ï§ë...';
                get('status2').className = 'preview-status processing';
                
                // ZIP Í∞ùÏ≤¥ ÏÉùÏÑ±
                const zip = new JSZip();
                
                updateProgress(85, 'Í≥†ÎØº ÏÑ†ÌÉù ÌôîÎ©¥ Ï∫°Ï≤ò Ï§ë...');
                
                // 1. Î©îÏù∏ ÌôîÎ©¥ Ï∫°Ï≤ò (ZIPÏóê Ï∂îÍ∞Ä)
                const mainCanvas = await generateMainImageForZip();
                const mainBlob = await new Promise(resolve => mainCanvas.toBlob(resolve, 'image/png'));
                zip.file('Îã•ÌÑ∞ÏßÄ_BuzzAd_Í≥†ÎØºÏÑ†ÌÉùÌôîÎ©¥.png', mainBlob);
                
                get('status1').textContent = 'Ï∫°Ï≤ò ÏôÑÎ£å';
                get('status1').className = 'preview-status completed';
                
                updateProgress(90, 'Ï†úÌíà ÏÉÅÏÑ∏ ÌôîÎ©¥ Ï∫°Ï≤ò Ï§ë...');
                
                // 2. Ï†úÌíà ÏÉÅÏÑ∏ ÌôîÎ©¥ Ï∫°Ï≤ò (ZIPÏóê Ï∂îÍ∞Ä)
                const productCanvas = await generateProductImageForZip();
                const productBlob = await new Promise(resolve => productCanvas.toBlob(resolve, 'image/png'));
                const data = productDataStore[1];
                const concernName = (data.concern || '').replace(/\n/g, '').replace(/[^\wÍ∞Ä-Ìû£]/g, '').substring(0, 10);
                zip.file(`Îã•ÌÑ∞ÏßÄ_BuzzAd_Ï†úÌíàÏÉÅÏÑ∏ÌôîÎ©¥_${concernName}.png`, productBlob);
                
                get('status2').textContent = 'Ï∫°Ï≤ò ÏôÑÎ£å';
                get('status2').className = 'preview-status completed';
                
                updateProgress(95, 'ZIP ÌååÏùº ÏÉùÏÑ± Ï§ë...');
                
                // ZIP ÌååÏùº ÏÉùÏÑ± Î∞è Îã§Ïö¥Î°úÎìú
                const zipContent = await zip.generateAsync({type: 'blob'});
                const now = Date.now();
                const zipFilename = `Îã•ÌÑ∞ÏßÄ_BuzzAd_ÌôîÎ©¥Ï∫°Ï≤ò_${now}.zip`;
                
                const link = document.createElement('a');
                link.href = URL.createObjectURL(zipContent);
                link.download = zipFilename;
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
                URL.revokeObjectURL(link.href);
                
                updateProgress(100, 'ZIP ÌååÏùº Îã§Ïö¥Î°úÎìúÍ∞Ä ÏôÑÎ£åÎêòÏóàÏäµÎãàÎã§! üéâ');
                
                // 1.5Ï¥à ÌõÑ ÏûêÎèôÏúºÎ°ú Î™®Îã¨ Îã´Í∏∞
                setTimeout(() => {
                    closeCaptureModal();
                    showUpdateNotice('üì∏ ZIP ÌååÏùº Îã§Ïö¥Î°úÎìúÍ∞Ä ÏôÑÎ£åÎêòÏóàÏäµÎãàÎã§!');
                }, 1500);
                
            } catch (error) {
                console.error('ZIP Ï∫°Ï≤ò Ïò§Î•ò:', error);
                updateProgress(0, 'ZIP ÏÉùÏÑ± Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§');
                // Ïò§Î•ò Ïãú Ï∫°Ï≤ò Î≤ÑÌäº Îã§Ïãú ÌëúÏãú
                get('captureButton').style.display = 'block';
                get('captureButton').disabled = false;
                get('captureButton').textContent = 'Îã§Ïãú ÏãúÎèÑ';
            }
        }

        // JSZip ÎùºÏù¥Î∏åÎü¨Î¶¨ Î°úÎìú
        function loadJSZip() {
            return new Promise((resolve, reject) => {
                if (window.JSZip) {
                    resolve();
                    return;
                }
                
                const script = document.createElement('script');
                script.src = 'https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js';
                script.onload = resolve;
                script.onerror = reject;
                document.head.appendChild(script);
            });
        }

        // ZIPÏö© Î©îÏù∏ ÌôîÎ©¥ Ïù¥ÎØ∏ÏßÄ ÏÉùÏÑ± (Canvas Î∞òÌôò)

function generateMainImageForZip() {
    return _captureCanvas('main');
}

        // ZIPÏö© Ï†úÌíà ÏÉÅÏÑ∏ ÌôîÎ©¥ Ïù¥ÎØ∏ÏßÄ ÏÉùÏÑ± (Canvas Î∞òÌôò)

        function generateProductImageForZip() {
            return new Promise((resolve) => {
                const data = productDataStore[1];
                const container = document.createElement('div');
                container.style.position = 'fixed';
                container.style.left = '-9999px';
                container.style.top = '0';
                container.style.width = '320px';
                container.style.height = '640px';
                
                container.innerHTML = `
                    <style>
                        .zip-phone-frame { width: 320px; height: 640px; background: var(--border-color); border-radius: 2rem; padding: 1rem; box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3); }
                        .zip-phone-screen { width: 100%; height: 100%; background: #fff; border-radius: 1.5rem; overflow: hidden; }
                        .zip-product-screen { background: #ffffff; padding: 1rem 0.75rem; display: flex; flex-direction: column; position: relative; min-height: 100%; }
                        .zip-back-button { border-radius: 50%; padding: 0.5rem; width: 2rem; height: 2rem; background: #f8f9fa; border: none; display: flex; align-items: center; justify-content: center; margin-bottom: 1rem; }
                        .zip-review-container { position: relative; padding: 1rem; padding-top: 1.5rem; border-radius: 0.5rem; background: #f8f9fa; width: 100%; margin-bottom: 1.5rem; }
                        .zip-review-icon { position: absolute; top: -0.75rem; left: 50%; width: 1.5rem; height: 1.5rem; border-radius: 50%; background: #ffffff; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08); transform: translateX(-50%); display: flex; align-items: center; justify-content: center; font-size: 0.75rem; }
                        .zip-review-text { color: rgba(51, 51, 51, 0.8); font-size: 0.6rem; line-height: 1.4; text-align: left; width: 100%; margin-bottom: 0.5rem; }
                        .zip-rating { font-weight: 600; font-size: 0.55rem; color: #D81E1F; text-align: center; margin-bottom: 0.5rem; }
                        .zip-highlight { color: var(--border-color)333; font-size: 0.6rem; font-weight: 600; text-align: center; }
                        .zip-product-info { display: flex; flex-direction: column; align-items: center; gap: 0.75rem; margin-bottom: 1.5rem; flex: 1; justify-content: center; }
                        .zip-product-image { width: 6rem; height: 6rem; border-radius: 0.75rem; background: linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%); display: flex; flex-direction: column; align-items: center; justify-content: center; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1); }
                        .zip-product-icon { font-size: 1.5rem; margin-bottom: 0.25rem; }
                        .zip-brand-text { font-size: 0.5rem; color: #9ca3af; }
                        .zip-product-name { color: var(--border-color)333; font-size: 0.65rem; font-weight: 500; text-align: center; line-height: 1.3; white-space: pre-line; }
                        .zip-cta-button { position: absolute; bottom: 0; left: 0; right: 0; width: 100%; padding: 0.75rem; background: #D2302F; color: white; font-weight: 600; font-size: 0.7rem; text-align: center; }
                    </style>
                    <div class="zip-phone-frame">
                        <div class="zip-phone-screen">
                            <div class="zip-product-screen">
                                <div class="zip-back-button">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 32 32" fill="none">
                                        <path d="M20 26L10 16L20 6" stroke="var(--border-color)333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
                                    </svg>
                                </div>

                                <div class="zip-review-container">
                                    <div class="zip-review-icon">üí≠</div>
                                    <div class="zip-review-text">${(data.productReview || '').substring(0, 200)}...</div>
                                    <div class="zip-rating">${data.rating || ''}</div>
                                    <div class="zip-highlight">${data.productHighlight || ''}</div>
                                </div>

                                <div class="zip-product-info">
                                    <div class="zip-product-image">
                                        <div class="zip-product-icon">üß¥</div>
                                        <div class="zip-brand-text">${data.brandName || 'Î∏åÎûúÎìú'}</div>
                                    </div>
                                    <div class="zip-product-name">${data.brandName}\n${data.productTitle}</div>
                                </div>

                                <div class="zip-cta-button">
                                    ${data.ctaText || ''}
                                </div>
                            </div>
                        </div>
                    </div>
                `;
                
                document.body.appendChild(container);
                
                setTimeout(() => {
                    html2canvas(container, {
                        backgroundColor: null,
                        scale: 2,
                        useCORS: true,
                        allowTaint: false,
                        logging: false
                    }).then(canvas => {
                        document.body.removeChild(container);
                        resolve(canvas);
                    });
                }, 500);
            });
        }

        // Î©îÏù∏ ÌôîÎ©¥ ÎØ∏Î¶¨Î≥¥Í∏∞ ÏÉùÏÑ±
        function generateMainPreview() {
            return new Promise((resolve) => {
                const container = document.createElement('div');
                container.style.width = '160px';
                container.style.height = '320px';
                container.style.transform = 'scale(0.5)';
                container.style.transformOrigin = 'top left';
                container.style.position = 'relative';
                
                container.innerHTML = `
                    <div style="width: 320px; height: 640px; background: var(--border-color); border-radius: 2rem; padding: 1rem; position: relative;">
                        <div style="width: 100%; height: 100%; background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%); border-radius: 1.5rem; padding: 4rem 1rem 2rem; display: flex; flex-direction: column; align-items: center; gap: 1.5rem;">
                            <div style="text-align: center; font-size: 0.9rem; font-weight: bold; color: var(--border-color); line-height: 1.4;">
                                ÏßÄÍ∏à ÎÇ¥ ÌîºÎ∂ÄÍ≥†ÎØºÏùÑ ÏÑ†ÌÉùÌïòÍ≥†<br>Ïö©ÎèàÏùÑ Î∞õÏïÑÎ≥¥ÏÑ∏Ïöî!
                            </div>
                            <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 0.25rem;">
                                <div style="width: 5.5rem; height: 5.5rem; background: white; border-radius: 0.5rem; display: flex; align-items: center; justify-content: center; box-shadow: 0 2px 8px rgba(0,0,0,0.08);">
                                    <span style="font-size: 0.7rem; text-align: center; padding: 0.5rem;">${productDataStore[1]?.concern || 'ÎÑìÏùÄ Î™®Í≥µ'}</span>
                                </div>
                                <div style="width: 5.5rem; height: 5.5rem; background: white; border-radius: 0.5rem; display: flex; align-items: center; justify-content: center; box-shadow: 0 2px 8px rgba(0,0,0,0.08);">
                                    <span style="font-size: 0.7rem; text-align: center; padding: 0.5rem;">${productDataStore[2]?.concern || 'ÎààÍ∞Ä¬∑ÌåîÏûê Îì± ÍπäÏùÄ Ï£ºÎ¶Ñ'}</span>
                                </div>
                                <div style="width: 5.5rem; height: 5.5rem; background: white; border-radius: 0.5rem; display: flex; align-items: center; justify-content: center; box-shadow: 0 2px 8px rgba(0,0,0,0.08);">
                                    <span style="font-size: 0.7rem; text-align: center; padding: 0.5rem;">${productDataStore[3]?.concern || 'Î©îÏù¥ÌÅ¨ÏóÖ Ïãú Îì§Îú®Îäî ÌîºÎ∂ÄÍ≤∞'}</span>
                                </div>
                                <div style="width: 5.5rem; height: 5.5rem; background: white; border-radius: 0.5rem; display: flex; align-items: center; justify-content: center; box-shadow: 0 2px 8px rgba(0,0,0,0.08);">
                                    <span style="font-size: 0.7rem; text-align: center; padding: 0.5rem;">${productDataStore[4]?.concern || 'ÌîºÎ∂Ä ÌÉÑÎ†•'}</span>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
                
                setTimeout(() => resolve(container), 100);
            });
        }

        // Ï†úÌíà ÏÉÅÏÑ∏ ÌôîÎ©¥ ÎØ∏Î¶¨Î≥¥Í∏∞ ÏÉùÏÑ±
        function generateProductPreview() {
            return new Promise((resolve) => {
                const data = productDataStore[1];
                const container = document.createElement('div');
                container.style.width = '160px';
                container.style.height = '320px';
                container.style.transform = 'scale(0.5)';
                container.style.transformOrigin = 'top left';
                container.style.position = 'relative';
                
                container.innerHTML = `
                    <div style="width: 320px; height: 640px; background: var(--border-color); border-radius: 2rem; padding: 1rem; position: relative;">
                        <div style="width: 100%; height: 100%; background: white; border-radius: 1.5rem; padding: 1rem 0.75rem; position: relative;">
                            <div style="width: 2rem; height: 2rem; background: #f8f9fa; border-radius: 50%; margin-bottom: 1rem; display: flex; align-items: center; justify-content: center;">
                                <svg width="16" height="16" viewBox="0 0 32 32" fill="none"><path d="M20 26L10 16L20 6" stroke="var(--border-color)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
                            </div>
                            
                            <div style="background: #f8f9fa; border-radius: 0.5rem; padding: 1rem; margin-bottom: 1rem; position: relative;">
                                <div style="position: absolute; top: -0.75rem; left: 50%; width: 1.5rem; height: 1.5rem; background: white; border-radius: 50%; transform: translateX(-50%); display: flex; align-items: center; justify-content: center; font-size: 0.75rem; box-shadow: 0 2px 8px rgba(0,0,0,0.08);">üí≠</div>
                                <div style="font-size: 0.6rem; color: rgba(51,51,51,0.8); line-height: 1.4; margin-bottom: 0.5rem;">${(data.productReview || '').substring(0, 100)}...</div>
                                <div style="font-size: 0.55rem; color: #D81E1F; text-align: center; margin-bottom: 0.5rem;">${data.rating || ''}</div>
                                <div style="font-size: 0.6rem; color: var(--border-color); font-weight: 600; text-align: center;">${data.productHighlight || ''}</div>
                            </div>
                            
                            <div style="display: flex; flex-direction: column; align-items: center; gap: 0.75rem; flex: 1; justify-content: center;">
                                <div style="width: 6rem; height: 6rem; background: linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%); border-radius: 0.75rem; display: flex; flex-direction: column; align-items: center; justify-content: center; box-shadow: 0 4px 12px rgba(0,0,0,0.1);">
                                    <div style="font-size: 1.5rem; margin-bottom: 0.25rem;">üß¥</div>
                                    <div style="font-size: 0.5rem; color: #9ca3af;">${data.brandName || 'Î∏åÎûúÎìú'}</div>
                                </div>
                                <div style="font-size: 0.65rem; color: var(--border-color); text-align: center; line-height: 1.3;">${data.brandName}<br>${data.productTitle}</div>
                            </div>
                            
                            <div style="position: absolute; bottom: 0; left: 0; right: 0; background: #D2302F; color: white; padding: 0.75rem; text-align: center; font-size: 0.7rem; font-weight: 600;">
                                ${data.ctaText || ''}
                            </div>
                        </div>
                    </div>
                `;
                
                setTimeout(() => resolve(container), 100);
            });
        }

        // Ï∫°Ï≤ò ÏãúÏûë
        async function startCapture() {
            const button = get('captureButton');
            button.disabled = true;
            button.textContent = 'Ï∫°Ï≤ò Ï§ë...';
            
            try {
                // ÏÉÅÌÉú ÏóÖÎç∞Ïù¥Ìä∏
                get('status1').textContent = 'Ï∫°Ï≤ò Ï§ë...';
                get('status1').className = 'preview-status processing';
                updateProgress(25, 'Í≥†ÎØº ÏÑ†ÌÉù ÌôîÎ©¥ Ï∫°Ï≤ò Ï§ë...');
                
                // 1. Î©îÏù∏ ÌôîÎ©¥ Ï∫°Ï≤ò
                await generateMainImageSeparate();
                get('status1').textContent = 'Ï∫°Ï≤ò ÏôÑÎ£å';
                get('status1').className = 'preview-status completed';
                
                updateProgress(50, 'Ï†úÌíà ÏÉÅÏÑ∏ ÌôîÎ©¥ Ï∫°Ï≤ò Ï§ë...');
                get('status2').textContent = 'Ï∫°Ï≤ò Ï§ë...';
                get('status2').className = 'preview-status processing';
                
                // 2Ï¥à ÎåÄÍ∏∞
                await new Promise(resolve => setTimeout(resolve, 2000));
                
                // 2. Ï†úÌíà ÏÉÅÏÑ∏ ÌôîÎ©¥ Ï∫°Ï≤ò
                await generateProductImageSeparate();
                get('status2').textContent = 'Ï∫°Ï≤ò ÏôÑÎ£å';
                get('status2').className = 'preview-status completed';
                
                updateProgress(100, 'Î™®Îì† Ïù¥ÎØ∏ÏßÄ Ï∫°Ï≤òÍ∞Ä ÏôÑÎ£åÎêòÏóàÏäµÎãàÎã§! üéâ');
                
                button.textContent = 'ÏôÑÎ£å';
                setTimeout(() => {
                    closeCaptureModal();
                    showUpdateNotice('üì∏ Ïù¥ÎØ∏ÏßÄ Ï∫°Ï≤òÍ∞Ä ÏôÑÎ£åÎêòÏóàÏäµÎãàÎã§!');
                }, 1500);
                
            } catch (error) {
                console.error('Ï∫°Ï≤ò Ïò§Î•ò:', error);
                updateProgress(0, 'Ï∫°Ï≤ò Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§');
                button.disabled = false;
                button.textContent = 'Îã§Ïãú ÏãúÎèÑ';
            }
        }

        // html2canvas ÎùºÏù¥Î∏åÎü¨Î¶¨ Î°úÎìú
        function loadHtml2Canvas() {
            return new Promise((resolve, reject) => {
                if (window.html2canvas) {
                    resolve();
                    return;
                }
                
                const script = document.createElement('script');
                script.src = 'https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js';
                script.onload = resolve;
                script.onerror = reject;
                document.head.appendChild(script);
            });
        }

// Í≥µÌÜµ Ï∫°Ï≤ò Ìï®Ïàò (Î™®Îã¨Ïö© & ZIPÏö©)
async function _captureCanvas(screen) {
    await loadHtml2Canvas();
    const targetId = screen === 'main' ? 'mainScreen' : 'productScreen';
    const target = document.getElementById(targetId);
    if(!target) throw new Error('Screen not found: '+screen);
    // show target if it was hidden
    const wasHidden = target.classList.contains('hidden');
    if(wasHidden) target.classList.remove('hidden');
    const frame = target.closest('.phone-frame');
    const clone = frame.cloneNode(true);
    const wrapper = document.createElement('div');
    wrapper.style.position = 'fixed';
    wrapper.style.left = '-9999px';
    wrapper.style.top = '0';
    wrapper.appendChild(clone);
    document.body.appendChild(wrapper);
    await new Promise(r=>setTimeout(r,100));
    const canvas = await html2canvas(clone, {backgroundColor:'#ffffff', scale:2, useCORS:true});
    document.body.removeChild(wrapper);
    if(wasHidden) target.classList.add('hidden');
    return canvas;
}

        // ÏôÑÏ†Ñ Î∂ÑÎ¶¨Îêú Î©îÏù∏ ÌôîÎ©¥ HTML ÏÉùÏÑ± Î∞è Ï∫°Ï≤ò
        function generateMainImageSeparate() {
            // ÏôÑÏ†ÑÌûà ÎèÖÎ¶ΩÎêú Ïª®ÌÖåÏù¥ÎÑà ÏÉùÏÑ±
            const container = document.createElement('div');
            container.style.position = 'fixed';
            container.style.left = '0';
            container.style.top = '0';
            container.style.width = '320px';
            container.style.height = '640px';
            container.style.zIndex = '9999';
            container.style.backgroundColor = 'white';
            
            // Î©îÏù∏ ÌôîÎ©¥ HTML ÏôÑÏ†Ñ Ïû¨ÏÉùÏÑ±
            container.innerHTML = `
                <style>
                    .isolated-phone-frame {
                        width: 320px;
                        height: 640px;
                        background: var(--border-color);
                        border-radius: 2rem;
                        padding: 1rem;
                        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
                        position: relative;
                    }
                    .isolated-phone-screen {
                        width: 100%;
                        height: 100%;
                        background: #fff;
                        border-radius: 1.5rem;
                        overflow: hidden;
                        position: relative;
                    }
                    .isolated-main-screen {
                        background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
                        display: flex;
                        flex-direction: column;
                        align-items: center;
                        gap: 1.5rem;
                        padding: 4rem 1rem 2rem;
                        height: 100%;
                        box-sizing: border-box;
                    }
                    .isolated-title {
                        text-align: center;
                        font-size: 0.9rem;
                        font-weight: bold;
                        color: var(--border-color)333;
                        white-space: pre-line;
                        line-height: 1.4;
                    }
                    .isolated-options-grid {
                        display: grid;
                        grid-template-columns: repeat(2, 1fr);
                        gap: 0.25rem;
                    }
                    .isolated-option-button {
                        border-radius: 0.5rem;
                        background: #ffffff;
                        width: 5.5rem;
                        height: 5.5rem;
                        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        border: none;
                    }
                    .isolated-option-text {
                        font-weight: 500;
                        font-size: 0.7rem;
                        line-height: 1.2;
                        color: var(--border-color)333;
                        white-space: pre-line;
                        text-align: center;
                        padding: 0.5rem;
                    }
                </style>
                <div class="isolated-phone-frame">
                    <div class="isolated-phone-screen">
                        <div class="isolated-main-screen">
                            <div class="isolated-title">ÏßÄÍ∏à ÎÇ¥ ÌîºÎ∂ÄÍ≥†ÎØºÏùÑ ÏÑ†ÌÉùÌïòÍ≥† 
Ïö©ÎèàÏùÑ Î∞õÏïÑÎ≥¥ÏÑ∏Ïöî!</div>
                            
                            <div class="isolated-options-grid">
                                <div class="isolated-option-button">
                                    <span class="isolated-option-text">${productDataStore[1]?.concern || 'ÎÑìÏùÄ Î™®Í≥µ'}</span>
                                </div>
                                <div class="isolated-option-button">
                                    <span class="isolated-option-text">${productDataStore[2]?.concern || 'ÎààÍ∞Ä¬∑ÌåîÏûê Îì±\nÍπäÏùÄ Ï£ºÎ¶Ñ'}</span>
                                </div>
                                <div class="isolated-option-button">
                                    <span class="isolated-option-text">${productDataStore[3]?.concern || 'Î©îÏù¥ÌÅ¨ÏóÖ Ïãú\nÎì§Îú®Îäî ÌîºÎ∂ÄÍ≤∞'}</span>
                                </div>
                                <div class="isolated-option-button">
                                    <span class="isolated-option-text">${productDataStore[4]?.concern || 'ÌîºÎ∂Ä ÌÉÑÎ†•'}</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            // DOMÏóê Ï∂îÍ∞Ä
            document.body.appendChild(container);
            
            // Î†åÎçîÎßÅ ÏôÑÎ£å ÎåÄÍ∏∞
            setTimeout(() => {
                html2canvas(container, {
                    backgroundColor: null,
                    scale: 2,
                    useCORS: true,
                    allowTaint: false,
                    logging: false
                }).then(canvas => {
                    // Îã§Ïö¥Î°úÎìú
                    const now = Date.now();
                    const filename = `Îã•ÌÑ∞ÏßÄ_BuzzAd_Í≥†ÎØºÏÑ†ÌÉùÌôîÎ©¥_${now}.png`;
                    const dataURL = canvas.toDataURL('image/png');
                    const link = document.createElement('a');
                    link.download = filename;
                    link.href = dataURL;
                    document.body.appendChild(link);
                    link.click();
                    document.body.removeChild(link);
                    
                    // Ïª®ÌÖåÏù¥ÎÑà Ï†úÍ±∞
                    document.body.removeChild(container);
                    
                    console.log('Î©îÏù∏ ÌôîÎ©¥ Ï∫°Ï≤ò ÏôÑÎ£å');
                }).catch(error => {
                    console.error('Î©îÏù∏ ÌôîÎ©¥ Ï∫°Ï≤ò Ïò§Î•ò:', error);
                    document.body.removeChild(container);
                });
            }, 500);
        }

        // ÏôÑÏ†Ñ Î∂ÑÎ¶¨Îêú Ï†úÌíà ÏÉÅÏÑ∏ ÌôîÎ©¥ HTML ÏÉùÏÑ± Î∞è Ï∫°Ï≤ò
        function generateProductImageSeparate() {
            const data = productDataStore[1];
            
            // ÏôÑÏ†ÑÌûà ÎèÖÎ¶ΩÎêú Ïª®ÌÖåÏù¥ÎÑà ÏÉùÏÑ±
            const container = document.createElement('div');
            container.style.position = 'fixed';
            container.style.left = '0';
            container.style.top = '0';
            container.style.width = '320px';
            container.style.height = '640px';
            container.style.zIndex = '9999';
            container.style.backgroundColor = 'white';
            
            // Ï†úÌíà ÏÉÅÏÑ∏ ÌôîÎ©¥ HTML ÏôÑÏ†Ñ Ïû¨ÏÉùÏÑ±
            container.innerHTML = `
                <style>
                    .isolated-phone-frame {
                        width: 320px;
                        height: 640px;
                        background: var(--border-color);
                        border-radius: 2rem;
                        padding: 1rem;
                        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
                        position: relative;
                    }
                    .isolated-phone-screen {
                        width: 100%;
                        height: 100%;
                        background: #fff;
                        border-radius: 1.5rem;
                        overflow: hidden;
                        position: relative;
                    }
                    .isolated-product-screen {
                        background: #ffffff;
                        padding: 1rem 0.75rem;
                        display: flex;
                        flex-direction: column;
                        gap: 0;
                        justify-content: flex-start;
                        position: relative;
                        min-height: 100%;
                    }
                    .isolated-back-button {
                        border-radius: 50%;
                        padding: 0.5rem;
                        width: 2rem;
                        height: 2rem;
                        background: #f8f9fa;
                        border: none;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        margin-bottom: 1rem;
                    }
                    .isolated-review-container {
                        position: relative;
                        padding: 1rem;
                        padding-top: 1.5rem;
                        border-radius: 0.5rem;
                        background: #f8f9fa;
                        width: 100%;
                        margin-bottom: 1.5rem;
                    }
                    .isolated-review-icon {
                        position: absolute;
                        top: -0.75rem;
                        left: 50%;
                        width: 1.5rem;
                        height: 1.5rem;
                        border-radius: 50%;
                        background: #ffffff;
                        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
                        transform: translateX(-50%);
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        font-size: 0.75rem;
                    }
                    .isolated-review-text {
                        white-space: pre-line;
                        color: rgba(51, 51, 51, 0.8);
                        font-size: 0.6rem;
                        line-height: 1.4;
                        text-align: left;
                        width: 100%;
                        margin-bottom: 0.5rem;
                    }
                    .isolated-rating {
                        font-weight: 600;
                        font-size: 0.55rem;
                        color: #D81E1F;
                        text-align: center;
                        margin-bottom: 0.5rem;
                    }
                    .isolated-highlight {
                        color: var(--border-color)333;
                        font-size: 0.6rem;
                        font-weight: 600;
                        text-align: center;
                    }
                    .isolated-product-info {
                        display: flex;
                        flex-direction: column;
                        align-items: center;
                        gap: 0.75rem;
                        margin-bottom: 1.5rem;
                        flex: 1;
                        justify-content: center;
                    }
                    .isolated-product-image {
                        width: 6rem;
                        height: 6rem;
                        border-radius: 0.75rem;
                        background: linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%);
                        display: flex;
                        flex-direction: column;
                        align-items: center;
                        justify-content: center;
                        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
                    }
                    .isolated-product-icon {
                        font-size: 1.5rem;
                        margin-bottom: 0.25rem;
                    }
                    .isolated-brand-text {
                        font-size: 0.5rem;
                        color: #9ca3af;
                    }
                    .isolated-product-name {
                        color: var(--border-color)333;
                        font-size: 0.65rem;
                        font-weight: 500;
                        text-align: center;
                        line-height: 1.3;
                        white-space: pre-line;
                    }
                    .isolated-cta-button {
                        position: absolute;
                        bottom: 0;
                        left: 0;
                        right: 0;
                        width: 100%;
                        padding: 0.75rem;
                        background: #D2302F;
                        color: white;
                        font-weight: 600;
                        font-size: 0.7rem;
                        border: none;
                        text-align: center;
                    }
                </style>
                <div class="isolated-phone-frame">
                    <div class="isolated-phone-screen">
                        <div class="isolated-product-screen">
                            <div class="isolated-back-button">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 32 32" fill="none">
                                    <path d="M20 26L10 16L20 6" stroke="var(--border-color)333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
                                </svg>
                            </div>

                            <div class="isolated-review-container">
                                <div class="isolated-review-icon">üí≠</div>
                                <div class="isolated-review-text">${data.productReview || ''}</div>
                                <div class="isolated-rating">${data.rating || ''}</div>
                                <div class="isolated-highlight">${data.productHighlight || ''}</div>
                            </div>

                            <div class="isolated-product-info">
                                <div class="isolated-product-image">
                                    <div class="isolated-product-icon">üß¥</div>
                                    <div class="isolated-brand-text">${data.brandName || 'Î∏åÎûúÎìú'}</div>
                                </div>
                                <div class="isolated-product-name">${data.brandName}\n${data.productTitle}</div>
                            </div>

                            <div class="isolated-cta-button">
                                ${data.ctaText || ''}
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            // DOMÏóê Ï∂îÍ∞Ä
            document.body.appendChild(container);
            
            // Î†åÎçîÎßÅ ÏôÑÎ£å ÎåÄÍ∏∞
            setTimeout(() => {
                html2canvas(container, {
                    backgroundColor: null,
                    scale: 2,
                    useCORS: true,
                    allowTaint: false,
                    logging: false
                }).then(canvas => {
                    // Îã§Ïö¥Î°úÎìú
                    const now = Date.now();
                    const concernName = (data.concern || '').replace(/\n/g, '').substring(0, 10);
                    const filename = `Îã•ÌÑ∞ÏßÄ_BuzzAd_Ï†úÌíàÏÉÅÏÑ∏ÌôîÎ©¥_${concernName}_${now}.png`;
                    const dataURL = canvas.toDataURL('image/png');
                    const link = document.createElement('a');
                    link.download = filename;
                    link.href = dataURL;
                    document.body.appendChild(link);
                    link.click();
                    document.body.removeChild(link);
                    
                    // Ïª®ÌÖåÏù¥ÎÑà Ï†úÍ±∞
                    document.body.removeChild(container);
                    
                    console.log('Ï†úÌíà ÏÉÅÏÑ∏ ÌôîÎ©¥ Ï∫°Ï≤ò ÏôÑÎ£å');
                    showUpdateNotice('üì∏ Ïù¥ÎØ∏ÏßÄ ÏÉùÏÑ±Ïù¥ ÏôÑÎ£åÎêòÏóàÏäµÎãàÎã§!');
                }).catch(error => {
                    console.error('Ï†úÌíà ÏÉÅÏÑ∏ ÌôîÎ©¥ Ï∫°Ï≤ò Ïò§Î•ò:', error);
                    document.body.removeChild(container);
                });
            }, 500);
        }

        // Î©îÏù∏ ÌôîÎ©¥ Ïù¥ÎØ∏ÏßÄ ÏÉùÏÑ± (Ïã§Ï†ú ÏãúÎÆ¨Î†àÏù¥ÌÑ∞ Ïä§ÌÉÄÏùº)
        function generateMainImage() {
            const canvas = document.createElement('canvas');
            canvas.width = 640; // Í≥†Ìï¥ÏÉÅÎèÑ (320*2)
            canvas.height = 1280; // Í≥†Ìï¥ÏÉÅÎèÑ (640*2)
            const ctx = canvas.getContext('2d');
            ctx.scale(2, 2); // Í≥†Ìï¥ÏÉÅÎèÑ Î†åÎçîÎßÅ
            
            // Ï†ÑÏ≤¥ Ìà¨Î™Ö Î∞∞Í≤Ω
            ctx.clearRect(0, 0, 320, 640);
            
            // Ìï∏ÎìúÌè∞ ÌîÑÎ†àÏûÑ (Í≤ÄÏùÄÏÉâ Îë•Í∑º ÏÇ¨Í∞ÅÌòï)
            ctx.fillStyle = 'var(--border-color)333';
            roundRect(ctx, 0, 0, 320, 640, 32); // 2rem = 32px
            ctx.fill();
            
            // ÎÇ¥Î∂Ä ÌôîÎ©¥ ÏòÅÏó≠ (Ìù∞ÏÉâ Îë•Í∑º ÏÇ¨Í∞ÅÌòï)
            ctx.fillStyle = '#ffffff';
            roundRect(ctx, 16, 16, 288, 608, 24); // 1.5rem = 24px
            ctx.fill();
            
            // ÌôîÎ©¥ ÎÇ¥Î∂Ä Î∞∞Í≤Ω (Í∑∏ÎùºÎç∞Ïù¥ÏÖò)
            const gradient = ctx.createLinearGradient(16, 16, 304, 624);
            gradient.addColorStop(0, '#f8f9fa');
            gradient.addColorStop(1, '#e9ecef');
            ctx.fillStyle = gradient;
            roundRect(ctx, 16, 16, 288, 608, 24);
            ctx.fill();
            
            // Ï†úÎ™©
            ctx.fillStyle = 'var(--border-color)333';
            ctx.font = 'bold 14px -apple-system, BlinkMacSystemFont, sans-serif';
            ctx.textAlign = 'center';
            ctx.fillText('ÏßÄÍ∏à ÎÇ¥ ÌîºÎ∂ÄÍ≥†ÎØºÏùÑ ÏÑ†ÌÉùÌïòÍ≥†', 160, 100);
            ctx.fillText('Ïö©ÎèàÏùÑ Î∞õÏïÑÎ≥¥ÏÑ∏Ïöî!', 160, 120);
            
            // ÏòµÏÖò Î≤ÑÌäºÎì§ (Ïã§Ï†ú Ïä§ÌÉÄÏùº Ï†ÅÏö©)
            const buttonSize = 88; // 5.5rem
            const gap = 4;
            const startX = (320 - (buttonSize * 2 + gap)) / 2;
            const startY = 160;
            
            for (let i = 0; i < 4; i++) {
                const row = Math.floor(i / 2);
                const col = i % 2;
                const x = startX + col * (buttonSize + gap);
                const y = startY + row * (buttonSize + gap);
                
                // Î≤ÑÌäº Í∑∏Î¶ºÏûê
                ctx.fillStyle = 'rgba(0, 0, 0, 0.08)';
                roundRect(ctx, x + 2, y + 4, buttonSize, buttonSize, 8);
                ctx.fill();
                
                // Î≤ÑÌäº Î∞∞Í≤Ω (Ìù∞ÏÉâ)
                ctx.fillStyle = '#ffffff';
                roundRect(ctx, x, y, buttonSize, buttonSize, 8);
                ctx.fill();
                
                // Î≤ÑÌäº ÌÖåÎëêÎ¶¨
                ctx.strokeStyle = 'rgba(0, 0, 0, 0.05)';
                ctx.lineWidth = 1;
                roundRect(ctx, x, y, buttonSize, buttonSize, 8);
                ctx.stroke();
                
                // ÌÖçÏä§Ìä∏
                ctx.fillStyle = 'var(--border-color)333';
                ctx.font = '500 11px -apple-system, BlinkMacSystemFont, sans-serif';
                ctx.textAlign = 'center';
                const concernText = productDataStore[i + 1]?.concern || `Í≥†ÎØº ${i + 1}`;
                const lines = concernText.split('\n');
                const totalHeight = lines.length * 12;
                const startTextY = y + buttonSize/2 - totalHeight/2 + 8;
                
                for (let j = 0; j < lines.length; j++) {
                    ctx.fillText(lines[j], x + buttonSize/2, startTextY + (j * 12));
                }
            }
            
            // Îã§Ïö¥Î°úÎìú
            const now = Date.now();
            const filename = `Îã•ÌÑ∞ÏßÄ_BuzzAd_Í≥†ÎØºÏÑ†ÌÉùÌôîÎ©¥_${now}.png`;
            const dataURL = canvas.toDataURL('image/png');
            const link = document.createElement('a');
            link.download = filename;
            link.href = dataURL;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }

        // Ï†úÌíà ÏÉÅÏÑ∏ ÌôîÎ©¥ Ïù¥ÎØ∏ÏßÄ ÏÉùÏÑ± (Ïã§Ï†ú ÏãúÎÆ¨Î†àÏù¥ÌÑ∞ Ïä§ÌÉÄÏùº)
        function generateProductImage() {
            const canvas = document.createElement('canvas');
            canvas.width = 640; // Í≥†Ìï¥ÏÉÅÎèÑ
            canvas.height = 1280; // Í≥†Ìï¥ÏÉÅÎèÑ
            const ctx = canvas.getContext('2d');
            ctx.scale(2, 2);
            
            const data = productDataStore[1];
            
            // Ï†ÑÏ≤¥ Ìà¨Î™Ö Î∞∞Í≤Ω
            ctx.clearRect(0, 0, 320, 640);
            
            // Ìï∏ÎìúÌè∞ ÌîÑÎ†àÏûÑ (Í≤ÄÏùÄÏÉâ Îë•Í∑º ÏÇ¨Í∞ÅÌòï)
            ctx.fillStyle = 'var(--border-color)333';
            roundRect(ctx, 0, 0, 320, 640, 32);
            ctx.fill();
            
            // ÎÇ¥Î∂Ä ÌôîÎ©¥ ÏòÅÏó≠ (Ìù∞ÏÉâ)
            ctx.fillStyle = '#ffffff';
            roundRect(ctx, 16, 16, 288, 608, 24);
            ctx.fill();
            
            // Îí§Î°úÍ∞ÄÍ∏∞ Î≤ÑÌäº (Îë•Í∑º Î∞∞Í≤Ω)
            ctx.fillStyle = '#f8f9fa';
            ctx.beginPath();
            ctx.arc(44, 44, 16, 0, Math.PI * 2); // 16px Îñ®Ïñ¥ÏßÑ Í≥≥Ïóê ÏúÑÏπò
            ctx.fill();
            
            // Îí§Î°úÍ∞ÄÍ∏∞ ÌôîÏÇ¥Ìëú
            ctx.strokeStyle = 'var(--border-color)333';
            ctx.lineWidth = 2;
            ctx.lineCap = 'round';
            ctx.lineJoin = 'round';
            ctx.beginPath();
            ctx.moveTo(51, 38);
            ctx.lineTo(41, 44);
            ctx.lineTo(51, 50);
            ctx.stroke();
            
            // Î¶¨Î∑∞ Ïª®ÌÖåÏù¥ÎÑà (Îë•Í∑º Î∞∞Í≤Ω)
            ctx.fillStyle = '#f8f9fa';
            roundRect(ctx, 28, 76, 264, 100, 8);
            ctx.fill();
            
            // Î¶¨Î∑∞ ÏïÑÏù¥ÏΩò (Ìù∞ÏÉâ Ïõê)
            ctx.fillStyle = '#ffffff';
            ctx.shadowColor = 'rgba(0, 0, 0, 0.08)';
            ctx.shadowBlur = 8;
            ctx.shadowOffsetY = 2;
            ctx.beginPath();
            ctx.arc(160, 64, 12, 0, Math.PI * 2);
            ctx.fill();
            ctx.shadowColor = 'transparent';
            
            // Î¶¨Î∑∞ ÏïÑÏù¥ÏΩò
            ctx.fillStyle = 'var(--border-color)';
            ctx.font = '12px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('üí≠', 160, 70);
            
            // Î¶¨Î∑∞ ÌÖçÏä§Ìä∏
            ctx.fillStyle = 'rgba(51, 51, 51, 0.8)';
            ctx.font = '10px -apple-system, BlinkMacSystemFont, sans-serif';
            ctx.textAlign = 'left';
            const reviewLines = wrapText(ctx, data.productReview || 'Ï†úÌíà Î¶¨Î∑∞', 240);
            for (let i = 0; i < Math.min(reviewLines.length, 3); i++) {
                ctx.fillText(reviewLines[i], 40, 95 + (i * 12));
            }
            
            // Î≥ÑÏ†ê
            ctx.fillStyle = '#D81E1F';
            ctx.font = 'bold 9px -apple-system, BlinkMacSystemFont, sans-serif';
            ctx.textAlign = 'center';
            ctx.fillText(data.rating || '4.7/5', 160, 145);
            
            // Ï†úÌíà ÌäπÏßï
            ctx.fillStyle = 'var(--border-color)333';
            ctx.font = 'bold 10px -apple-system, BlinkMacSystemFont, sans-serif';
            ctx.fillText(data.productHighlight || 'Ï†úÌíà ÌäπÏßï', 160, 165);
            
            // Íµ¨Î∂ÑÏÑ† (Îë•Í∑º ÏÇ¨Í∞ÅÌòï)
            ctx.fillStyle = 'rgba(229, 231, 235, 0.2)';
            roundRect(ctx, 144, 185, 32, 8, 4);
            ctx.fill();
            
            // Ï†úÌíà Ïù¥ÎØ∏ÏßÄ ÏòÅÏó≠ (Îë•Í∑º ÏÇ¨Í∞ÅÌòï + Í∑∏Î¶ºÏûê)
            const imgX = 112;
            const imgY = 220;
            const imgSize = 96;
            
            // Í∑∏Î¶ºÏûê
            ctx.fillStyle = 'rgba(0, 0, 0, 0.1)';
            ctx.shadowColor = 'rgba(0, 0, 0, 0.1)';
            ctx.shadowBlur = 12;
            ctx.shadowOffsetY = 4;
            roundRect(ctx, imgX + 2, imgY + 2, imgSize, imgSize, 12);
            ctx.fill();
            ctx.shadowColor = 'transparent';
            
            // Ï†úÌíà Ïù¥ÎØ∏ÏßÄ Î∞∞Í≤Ω (Í∑∏ÎùºÎç∞Ïù¥ÏÖò)
            const productGradient = ctx.createLinearGradient(imgX, imgY, imgX + imgSize, imgY + imgSize);
            productGradient.addColorStop(0, '#f3f4f6');
            productGradient.addColorStop(1, '#e5e7eb');
            ctx.fillStyle = productGradient;
            roundRect(ctx, imgX, imgY, imgSize, imgSize, 12);
            ctx.fill();
            
            // Ï†úÌíà ÏïÑÏù¥ÏΩò
            ctx.fillStyle = '#6b7280';
            ctx.font = '24px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('üß¥', imgX + imgSize/2, imgY + 40);
            
            // Î∏åÎûúÎìúÎ™Ö
            ctx.font = '8px -apple-system, BlinkMacSystemFont, sans-serif';
            ctx.fillText(data.brandName || 'Î∏åÎûúÎìú', imgX + imgSize/2, imgY + 60);
            
            // Ï†úÌíàÎ™Ö
            ctx.fillStyle = 'var(--border-color)333';
            ctx.font = '10px -apple-system, BlinkMacSystemFont, sans-serif';
            const productLines = [data.brandName || '', data.productTitle || ''];
            for (let i = 0; i < productLines.length; i++) {
                ctx.fillText(productLines[i], 160, 340 + (i * 12));
            }
            
            // CTA Î≤ÑÌäº (ÌïòÎã®)
            ctx.fillStyle = '#D2302F';
            ctx.fillRect(16, 584, 288, 40); // ÌîÑÎ†àÏûÑ ÏïàÏ™ΩÏóê ÎßûÏ∂§
            
            ctx.fillStyle = '#ffffff';
            ctx.font = 'bold 11px -apple-system, BlinkMacSystemFont, sans-serif';
            ctx.textAlign = 'center';
            ctx.fillText(data.ctaText || 'CTA Î≤ÑÌäº', 160, 608);
            
            // Îã§Ïö¥Î°úÎìú
            const now = Date.now();
            const concernName = (data.concern || '').replace(/\n/g, '').substring(0, 10);
            const filename = `Îã•ÌÑ∞ÏßÄ_BuzzAd_Ï†úÌíàÏÉÅÏÑ∏ÌôîÎ©¥_${concernName}_${now}.png`;
            const dataURL = canvas.toDataURL('image/png');
            const link = document.createElement('a');
            link.download = filename;
            link.href = dataURL;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }

        // Îë•Í∑º ÏÇ¨Í∞ÅÌòï Í∑∏Î¶¨Í∏∞ Ìï®Ïàò
        function roundRect(ctx, x, y, width, height, radius) {
            ctx.beginPath();
            ctx.moveTo(x + radius, y);
            ctx.arcTo(x + width, y, x + width, y + height, radius);
            ctx.arcTo(x + width, y + height, x, y + height, radius);
            ctx.arcTo(x, y + height, x, y, radius);
            ctx.arcTo(x, y, x + width, y, radius);
            ctx.closePath();
        }

        // ÌÖçÏä§Ìä∏ Ï§ÑÎ∞îÍøà Ìó¨Ìçº Ìï®Ïàò
        function wrapText(ctx, text, maxWidth) {
            const words = text.split(' ');
            const lines = [];
            let currentLine = '';
            
            for (let word of words) {
                const testLine = currentLine + word + ' ';
                const metrics = ctx.measureText(testLine);
                if (metrics.width > maxWidth && currentLine !== '') {
                    lines.push(currentLine.trim());
                    currentLine = word + ' ';
                } else {
                    currentLine = testLine;
                }
            }
            if (currentLine) {
                lines.push(currentLine.trim());
            }
            return lines;
        }

        // Î©îÎ™®Î¶¨ Í∏∞Î∞ò Îç∞Ïù¥ÌÑ∞ Ï†ÄÏû•ÏÜå
        const productDataStore = {
            1: {
                concern: "ÎÑìÏùÄ Î™®Í≥µ",
                brandName: "Îã•ÌÑ∞ÏßÄ",
                productTitle: "Î†àÎìú Î∏îÎ†àÎØ∏Ïâ¨ ÌÅ¥Î¶¨Ïñ¥ ÏàòÎî© ÌÅ¨Î¶º 70ml",
                productReview: "ÎÑìÏùÄ Î™®Í≥µÏù¥ Í≥†ÎØºÏù¥ÏóàÎäîÎç∞ Ïù¥ ÌÅ¨Î¶º Ïì∞Í≥† ÎÇòÏÑú ÌôïÏã§Ìûà Î™®Í≥µÏù¥ ÏûëÏïÑÏßÑ ÎäêÎÇåÏù¥ÏóêÏöî! Î∂âÏùÄÍ∏∞ÎèÑ Í∞ÄÎùºÏïâÍ≥† ÌîºÎ∂ÄÍ∞Ä ÏßÑÏ†ïÎêòÎäî ÎäêÎÇåÏù¥ Ï¢ãÏïÑÏöî. ÌÖçÏä§Ï≤òÎèÑ Í∞ÄÎ≥çÍ≥† ÎÅàÏ†ÅÏù¥ÏßÄ ÏïäÏïÑÏÑú Ïó¨Î¶ÑÏóêÎèÑ Î∂ÄÎã¥ ÏóÜÏù¥ ÏÇ¨Ïö©Ìï† Ïàò ÏûàÏñ¥Ïöî. Íæ∏Ï§ÄÌûà ÏÇ¨Ïö©ÌïòÎãàÍπå ÌîºÎ∂Ä ÌÜ§ÎèÑ ÌïúÍ≤∞ Í∑†ÏùºÌï¥ÏßÑ Í≤É Í∞ôÏïÑÏöî.",
                rating: "4.7/5 Ï†úÌíàÌèâ(892Í±¥)",
                productHighlight: "Î™®Í≥µ ÏºÄÏñ¥ & ÏßÑÏ†ï Ï†ÑÎ¨∏!",
                ctaText: "Ï†úÌíà Íµ¨Í≤ΩÌïòÍ≥† 8P Ïö©Îèà Î∞õÍ∏∞",
                imageUrl: "https://image.oliveyoung.co.kr/uploads/images/goods/400/10/0000/0020/A00000020679402ko.jpg"
            },
            2: {
                concern: "ÎààÍ∞Ä¬∑ÌåîÏûê Îì±\nÍπäÏùÄ Ï£ºÎ¶Ñ",
                brandName: "ÏóêÏä§Ìã∞Î°úÎçî",
                productTitle: "Ïñ¥ÎìúÎ∞¥Ïä§Îìú ÎÇòÏù¥Ìä∏ Î¶¨ÌéòÏñ¥ ÏÑ∏Îüº 50ml",
                productReview: "40ÎåÄ Îì§Ïñ¥ÏÑúÏÑú ÎààÍ∞Ä Ï£ºÎ¶ÑÏù¥ Ï†ïÎßê Ïã†Í≤Ω Ïì∞ÏòÄÎäîÎç∞ Ïù¥ ÏÑ∏Îüº ÏÇ¨Ïö©ÌïòÍ≥† ÎÇòÏÑú ÌôïÏã§Ìûà Îã¨ÎùºÏßÑ Í≤å ÎäêÍª¥Ï†∏Ïöî. ÏïÑÏπ®Ïóê ÏùºÏñ¥ÎÇòÎ©¥ ÌîºÎ∂ÄÍ∞Ä Ï¥âÏ¥âÌïòÍ≥† ÌÉÑÎ†• ÏûàÏñ¥ Î≥¥Ïó¨Ïöî. 3Í∞úÏõî Ï†ïÎèÑ Íæ∏Ï§ÄÌûà Ïì∞ÎãàÍπå Ï£ºÎ≥ÄÏóêÏÑú ÌîºÎ∂ÄÍ∞Ä Ï¢ãÏïÑÏ°åÎã§Îäî ÎßêÏùÑ ÎßéÏù¥ Îì§Ïñ¥Ïöî. Í∞ÄÍ≤©Ïù¥ Î∂ÄÎã¥ÎêòÍ∏¥ ÌïòÏßÄÎßå Ìö®Í≥ºÍ∞Ä ÌôïÏã§Ìï¥ÏÑú Í≥ÑÏÜç Ïì∞Í≥† ÏûàÏñ¥Ïöî.",
                rating: "4.8/5 Ï†úÌíàÌèâ(1,234Í±¥)",
                productHighlight: "ÏïàÌã∞ÏóêÏù¥Ïßï & Ï£ºÎ¶Ñ Í∞úÏÑ†!",
                ctaText: "Ï†úÌíà Íµ¨Í≤ΩÌïòÍ≥† 10P Ïö©Îèà Î∞õÍ∏∞",
                imageUrl: "https://image.oliveyoung.co.kr/uploads/images/goods/400/10/0000/0019/A00000019800101ko.jpg"
            },
            3: {
                concern: "Î©îÏù¥ÌÅ¨ÏóÖ Ïãú\nÎì§Îú®Îäî ÌîºÎ∂ÄÍ≤∞",
                brandName: "ÎùºÎÑ§Ï¶à",
                productTitle: "ÎÑ§Ïò§ ÌååÏö¥Îç∞Ïù¥ÏÖò 30ml",
                productReview: "Î©îÏù¥ÌÅ¨ÏóÖÌï† Îïå Ìï≠ÏÉÅ ÌîºÎ∂ÄÍ≤∞Ïù¥ Í±∞Ïπ†Ïñ¥ Î≥¥Ïó¨ÏÑú Í≥†ÎØºÏù¥ÏóàÎäîÎç∞, Ïù¥ ÌååÏö¥Îç∞Ïù¥ÏÖòÏùÄ Ï†ïÎßê Îß§ÎÅÑÎüΩÍ≤å Î∞úÎ†§Ïöî! Ïª§Î≤ÑÎ†•ÎèÑ Ï¢ãÍ≥† ÌïòÎ£® Ï¢ÖÏùº Î¨¥ÎÑàÏßÄÏßÄ ÏïäÏïÑÏÑú ÎßåÏ°±Ìï¥Ïöî. ÌäπÌûà Î™®Í≥µÏù¥ÎÇò ÏûîÏ£ºÎ¶ÑÎèÑ ÏûêÏó∞Ïä§ÎüΩÍ≤å Ïª§Î≤ÑÌï¥Ï§òÏÑú ÌîºÎ∂ÄÍ∞Ä Ìõ®Ïî¨ ÍπîÎÅîÌï¥ Î≥¥Ïó¨Ïöî. ÏÉâÏÉÅÎèÑ Îã§ÏñëÌï¥ÏÑú ÎÇ¥ ÌîºÎ∂ÄÌÜ§Ïóê ÎßûÎäî Í±∏ Ï∞æÏùÑ Ïàò ÏûàÏñ¥Ïöî.",
                rating: "4.6/5 Ï†úÌíàÌèâ(756Í±¥)",
                productHighlight: "Îß§ÎÅÑÎü¨Ïö¥ ÌîºÎ∂Ä ÌëúÌòÑ!",
                ctaText: "Ï†úÌíà Íµ¨Í≤ΩÌïòÍ≥† 7P Ïö©Îèà Î∞õÍ∏∞",
                imageUrl: "https://image.oliveyoung.co.kr/uploads/images/goods/400/10/0000/0018/A00000018965101ko.jpg"
            },
            4: {
                concern: "ÌîºÎ∂Ä ÌÉÑÎ†•",
                brandName: "SK-II",
                productTitle: "ÌéòÏù¥ÏÖú Ìä∏Î¶¨Ìä∏Î®ºÌä∏ ÏóêÏÑºÏä§ 230ml",
                productReview: "ÎÇòÏù¥Í∞Ä Îì§Î©¥ÏÑú ÌîºÎ∂Ä ÌÉÑÎ†•Ïù¥ Îñ®Ïñ¥ÏßÄÎäî Í≤å Í≥†ÎØºÏù¥ÏóàÎäîÎç∞, Ïù¥ ÏóêÏÑºÏä§ Ïì∞Í≥† ÎÇòÏÑú ÌîºÎ∂ÄÍ∞Ä Ï†ïÎßê ÌÉ±ÌÉ±Ìï¥ÏßÑ ÎäêÎÇåÏù¥ÏóêÏöî! 2Ï£º Ï†ïÎèÑ Ïì∞ÎãàÍπå ÌîºÎ∂Ä Í≤∞Ïù¥ Îã¨ÎùºÏßÄÎäî Í±∏ ÎäêÍºàÍ≥†, ÏßÄÍ∏àÏùÄ 3Í∞úÏõîÏß∏ Ïì∞Í≥† ÏûàÎäîÎç∞ Ï£ºÎ≥ÄÏóêÏÑú ÌîºÎ∂ÄÍ∞Ä Ï¢ãÏïÑÏ°åÎã§Í≥† ÎßéÏù¥ ÎßêÌï¥Ï§òÏöî. Í∞íÏùÄ ÎπÑÏã∏ÏßÄÎßå Í∑∏ÎßåÌïú Í∞ÄÏπòÍ∞Ä ÏûàÎã§Í≥† ÏÉùÍ∞ÅÌï¥Ïöî.",
                rating: "4.9/5 Ï†úÌíàÌèâ(2,341Í±¥)",
                productHighlight: "ÌîÑÎ¶¨ÎØ∏ÏóÑ ÌÉÑÎ†• ÏºÄÏñ¥!",
                ctaText: "Ï†úÌíà Íµ¨Í≤ΩÌïòÍ≥† 12P Ïö©Îèà Î∞õÍ∏∞",
                imageUrl: "https://image.oliveyoung.co.kr/uploads/images/goods/400/10/0000/0015/A00000015234101ko.jpg"
            }
        };

        // ÌòÑÏû¨ ÏÑ†ÌÉùÎêú Ï†úÌíà Î≤àÌò∏
        let currentProduct = 1;

        // ÌéòÏù¥ÏßÄ Î°úÎìú Ïãú Ï¥àÍ∏∞Ìôî
        document.addEventListener('DOMContentLoaded', function() {
            loadProductData(1);
            updateSimulator();
            
            // Ìèº ÏûÖÎ†• Ïù¥Î≤§Ìä∏ Î¶¨Ïä§ÎÑà Ï∂îÍ∞Ä
            const inputs = ['concernInput', 'brandNameInput', 'productTitleInput', 'productReviewInput', 'ratingInput', 'productHighlightInput', 'ctaTextInput', 'imageUrlInput'];
            inputs.forEach(inputId => {
                const element = document.getElementById(inputId);
                if (element) {
                    element.addEventListener('input', function() {
                        saveCurrentProductData();
                        updateSimulator();
                        showUpdateNotice();
                    });
                }
            });

            // ÏòµÏÖò Î≤ÑÌäº ÌÅ¥Î¶≠ Ïù¥Î≤§Ìä∏
            document.querySelectorAll('.option-button').forEach((button, index) => {
                button.addEventListener('click', function() {
                    const productNum = this.getAttribute('data-option');
                    selectOption(productNum);
                });
            });
        });

        // Ï†úÌíà ÌÉ≠ Ï†ÑÌôò
        function switchProduct(productNum) {
            // ÌòÑÏû¨ Ï†úÌíà Îç∞Ïù¥ÌÑ∞ Ï†ÄÏû•
            saveCurrentProductData();
            
            // ÌÉ≠ Ïä§ÌÉÄÏùº Î≥ÄÍ≤Ω
            document.querySelectorAll('.product-tab').forEach(tab => tab.classList.remove('active'));
            document.getElementById(`tab${productNum}`).classList.add('active');
            
            // ÏÉà Ï†úÌíà Îç∞Ïù¥ÌÑ∞ Î°úÎìú
            currentProduct = productNum;
            loadProductData(productNum);
            updateSimulator();
        }

        // ÌòÑÏû¨ ÌèºÏùò Îç∞Ïù¥ÌÑ∞Î•º Ï†ÄÏû•ÏÜåÏóê Ï†ÄÏû•
        function saveCurrentProductData() {
            productDataStore[currentProduct] = {
                concern: get('concernInput').value,
                brandName: get('brandNameInput').value,
                productTitle: get('productTitleInput').value,
                productReview: get('productReviewInput').value,
                rating: get('ratingInput').value,
                productHighlight: get('productHighlightInput').value,
                ctaText: get('ctaTextInput').value,
                imageUrl: get('imageUrlInput').value
            };
        }

        // Ï†úÌíà Îç∞Ïù¥ÌÑ∞Î•º ÌèºÏóê Î°úÎìú
        function loadProductData(productNum) {
            const data = productDataStore[productNum];
            if (data) {
                get('concernInput').value = data.concern || '';
                get('brandNameInput').value = data.brandName || '';
                get('productTitleInput').value = data.productTitle || '';
                get('productReviewInput').value = data.productReview || '';
                get('ratingInput').value = data.rating || '';
                get('productHighlightInput').value = data.productHighlight || '';
                get('ctaTextInput').value = data.ctaText || '';
                get('imageUrlInput').value = data.imageUrl || '';
            }
        }

        // ÏãúÎÆ¨Î†àÏù¥ÌÑ∞ ÏóÖÎç∞Ïù¥Ìä∏
        function updateSimulator() {
            // Î©îÏù∏ ÌôîÎ©¥Ïùò ÏòµÏÖò ÌÖçÏä§Ìä∏ ÏóÖÎç∞Ïù¥Ìä∏
            for (let i = 1; i <= 4; i++) {
                const data = productDataStore[i];
                if (data && data.concern) {
                    document.getElementById(`optionText${i}`).textContent = data.concern;
                }
            }
        }

        // ÏòµÏÖò ÏÑ†ÌÉù Ïãú Î°úÎî© ÌôîÎ©¥ÏúºÎ°ú Ï†ÑÌôò
        function selectOption(productNum) {
            // Î©îÏù∏ ÌôîÎ©¥ Ïà®Í∏∞Í∏∞
            get('mainScreen').classList.add('hidden');
            
            // Î°úÎî© ÌôîÎ©¥ Î≥¥Ïù¥Í∏∞
            get('loadingScreen').classList.remove('hidden');
            
            // 2Ï¥à ÌõÑ Ï†úÌíà ÏÉÅÏÑ∏ ÌôîÎ©¥ÏúºÎ°ú Ï†ÑÌôò
            setTimeout(() => {
                showProductScreen(productNum);
            }, 2000);
        }

        // Ï†úÌíà ÏÉÅÏÑ∏ ÌôîÎ©¥ ÌëúÏãú
        function showProductScreen(productNum) {
            const data = productDataStore[productNum];
            
            // Ï†úÌíà ÏÉÅÏÑ∏ Ï†ïÎ≥¥ ÏóÖÎç∞Ïù¥Ìä∏
            get('reviewText').textContent = data.productReview || '';
            get('ratingText').textContent = data.rating || '';
            get('highlightText').textContent = data.productHighlight || '';
            get('productNameText').textContent = `${data.brandName}\n${data.productTitle}` || '';
            get('ctaButtonText').textContent = data.ctaText || '';
            
            // Ïù¥ÎØ∏ÏßÄ ÏóÖÎç∞Ïù¥Ìä∏ - ÏïàÏ†ÑÌïú Î∞©ÏãùÏúºÎ°ú Ï≤òÎ¶¨
            const imageContainer = get('productImage');
            imageContainer.innerHTML = ''; // Í∏∞Ï°¥ ÎÇ¥Ïö© ÌÅ¥Î¶¨Ïñ¥
            
            if (data.imageUrl && data.imageUrl.trim()) {
                // Ïù¥ÎØ∏ÏßÄ ÏöîÏÜå ÏÉùÏÑ±
                const img = document.createElement('img');
                img.src = data.imageUrl;
                img.alt = data.productTitle || 'Ï†úÌíà Ïù¥ÎØ∏ÏßÄ';
                img.style.width = '100%';
                img.style.height = '100%';
                img.style.objectFit = 'cover';
                
                // Ïù¥ÎØ∏ÏßÄ Î°úÎìú Ïã§Ìå® Ïãú ÌîåÎ†àÏù¥Ïä§ÌôÄÎçî ÌëúÏãú
                img.onerror = function() {
                    const placeholder = createPlaceholder(data.brandName || 'Î∏åÎûúÎìú');
                    imageContainer.innerHTML = '';
                    imageContainer.appendChild(placeholder);
                };
                
                imageContainer.appendChild(img);
            } else {
                // Ïù¥ÎØ∏ÏßÄ URLÏù¥ ÏóÜÏúºÎ©¥ ÌîåÎ†àÏù¥Ïä§ÌôÄÎçî ÌëúÏãú
                const placeholder = createPlaceholder(data.brandName || 'Î∏åÎûúÎìú');
                imageContainer.appendChild(placeholder);
            }
            
            // ÌôîÎ©¥ Ï†ÑÌôò
            get('loadingScreen').classList.add('hidden');
            get('productScreen').classList.remove('hidden');
        }

        // ÌîåÎ†àÏù¥Ïä§ÌôÄÎçî ÏöîÏÜå ÏÉùÏÑ± Ìï®Ïàò
        function createPlaceholder(brandName) {
            const placeholder = document.createElement('div');
            placeholder.className = 'product-placeholder';
            
            const icon = document.createElement('div');
            icon.className = 'product-icon';
            icon.textContent = 'üß¥';
            
            const brand = document.createElement('div');
            brand.style.fontSize = '0.5rem';
            brand.style.color = '#9ca3af';
            brand.textContent = brandName;
            
            placeholder.appendChild(icon);
            placeholder.appendChild(brand);
            
            return placeholder;
        }

        // Îí§Î°úÍ∞ÄÍ∏∞
        function goBack() {
            get('productScreen').classList.add('hidden');
            get('mainScreen').classList.remove('hidden');
        }

        // CTA Î≤ÑÌäº ÌÅ¥Î¶≠
        function handleCTA() {
            alert('CTA Î≤ÑÌäºÏù¥ ÌÅ¥Î¶≠ÎêòÏóàÏäµÎãàÎã§!');
        }

        // Î¶¨ÏÖã Í∏∞Îä•
        function resetToDefault() {
            // Í∏∞Î≥∏Í∞íÏúºÎ°ú Î¶¨ÏÖã
            const defaultData = {
                1: {
                    concern: "ÎÑìÏùÄ Î™®Í≥µ",
                    brandName: "Îã•ÌÑ∞ÏßÄ",
                    productTitle: "Î†àÎìú Î∏îÎ†àÎØ∏Ïâ¨ ÌÅ¥Î¶¨Ïñ¥ ÏàòÎî© ÌÅ¨Î¶º 70ml",
                    productReview: "ÎÑìÏùÄ Î™®Í≥µÏù¥ Í≥†ÎØºÏù¥ÏóàÎäîÎç∞ Ïù¥ ÌÅ¨Î¶º Ïì∞Í≥† ÎÇòÏÑú ÌôïÏã§Ìûà Î™®Í≥µÏù¥ ÏûëÏïÑÏßÑ ÎäêÎÇåÏù¥ÏóêÏöî! Î∂âÏùÄÍ∏∞ÎèÑ Í∞ÄÎùºÏïâÍ≥† ÌîºÎ∂ÄÍ∞Ä ÏßÑÏ†ïÎêòÎäî ÎäêÎÇåÏù¥ Ï¢ãÏïÑÏöî. ÌÖçÏä§Ï≤òÎèÑ Í∞ÄÎ≥çÍ≥† ÎÅàÏ†ÅÏù¥ÏßÄ ÏïäÏïÑÏÑú Ïó¨Î¶ÑÏóêÎèÑ Î∂ÄÎã¥ ÏóÜÏù¥ ÏÇ¨Ïö©Ìï† Ïàò ÏûàÏñ¥Ïöî. Íæ∏Ï§ÄÌûà ÏÇ¨Ïö©ÌïòÎãàÍπå ÌîºÎ∂Ä ÌÜ§ÎèÑ ÌïúÍ≤∞ Í∑†ÏùºÌï¥ÏßÑ Í≤É Í∞ôÏïÑÏöî.",
                    rating: "4.7/5 Ï†úÌíàÌèâ(892Í±¥)",
                    productHighlight: "Î™®Í≥µ ÏºÄÏñ¥ & ÏßÑÏ†ï Ï†ÑÎ¨∏!",
                    ctaText: "Ï†úÌíà Íµ¨Í≤ΩÌïòÍ≥† 8P Ïö©Îèà Î∞õÍ∏∞",
                    imageUrl: "https://image.oliveyoung.co.kr/uploads/images/goods/400/10/0000/0020/A00000020679402ko.jpg"
                },
                2: {
                    concern: "ÎààÍ∞Ä¬∑ÌåîÏûê Îì±\nÍπäÏùÄ Ï£ºÎ¶Ñ",
                    brandName: "ÏóêÏä§Ìã∞Î°úÎçî",
                    productTitle: "Ïñ¥ÎìúÎ∞¥Ïä§Îìú ÎÇòÏù¥Ìä∏ Î¶¨ÌéòÏñ¥ ÏÑ∏Îüº 50ml",
                    productReview: "40ÎåÄ Îì§Ïñ¥ÏÑúÏÑú ÎààÍ∞Ä Ï£ºÎ¶ÑÏù¥ Ï†ïÎßê Ïã†Í≤Ω Ïì∞ÏòÄÎäîÎç∞ Ïù¥ ÏÑ∏Îüº ÏÇ¨Ïö©ÌïòÍ≥† ÎÇòÏÑú ÌôïÏã§Ìûà Îã¨ÎùºÏßÑ Í≤å ÎäêÍª¥Ï†∏Ïöî. ÏïÑÏπ®Ïóê ÏùºÏñ¥ÎÇòÎ©¥ ÌîºÎ∂ÄÍ∞Ä Ï¥âÏ¥âÌïòÍ≥† ÌÉÑÎ†• ÏûàÏñ¥ Î≥¥Ïó¨Ïöî. 3Í∞úÏõî Ï†ïÎèÑ Íæ∏Ï§ÄÌûà Ïì∞ÎãàÍπå Ï£ºÎ≥ÄÏóêÏÑú ÌîºÎ∂ÄÍ∞Ä Ï¢ãÏïÑÏ°åÎã§Îäî ÎßêÏùÑ ÎßéÏù¥ Îì§Ïñ¥Ïöî. Í∞ÄÍ≤©Ïù¥ Î∂ÄÎã¥ÎêòÍ∏¥ ÌïòÏßÄÎßå Ìö®Í≥ºÍ∞Ä ÌôïÏã§Ìï¥ÏÑú Í≥ÑÏÜç Ïì∞Í≥† ÏûàÏñ¥Ïöî.",
                    rating: "4.8/5 Ï†úÌíàÌèâ(1,234Í±¥)",
                    productHighlight: "ÏïàÌã∞ÏóêÏù¥Ïßï & Ï£ºÎ¶Ñ Í∞úÏÑ†!",
                    ctaText: "Ï†úÌíà Íµ¨Í≤ΩÌïòÍ≥† 10P Ïö©Îèà Î∞õÍ∏∞",
                    imageUrl: "https://image.oliveyoung.co.kr/uploads/images/goods/400/10/0000/0019/A00000019800101ko.jpg"
                },
                3: {
                    concern: "Î©îÏù¥ÌÅ¨ÏóÖ Ïãú\nÎì§Îú®Îäî ÌîºÎ∂ÄÍ≤∞",
                    brandName: "ÎùºÎÑ§Ï¶à",
                    productTitle: "ÎÑ§Ïò§ ÌååÏö¥Îç∞Ïù¥ÏÖò 30ml",
                    productReview: "Î©îÏù¥ÌÅ¨ÏóÖÌï† Îïå Ìï≠ÏÉÅ ÌîºÎ∂ÄÍ≤∞Ïù¥ Í±∞Ïπ†Ïñ¥ Î≥¥Ïó¨ÏÑú Í≥†ÎØºÏù¥ÏóàÎäîÎç∞, Ïù¥ ÌååÏö¥Îç∞Ïù¥ÏÖòÏùÄ Ï†ïÎßê Îß§ÎÅÑÎüΩÍ≤å Î∞úÎ†§Ïöî! Ïª§Î≤ÑÎ†•ÎèÑ Ï¢ãÍ≥† ÌïòÎ£® Ï¢ÖÏùº Î¨¥ÎÑàÏßÄÏßÄ ÏïäÏïÑÏÑú ÎßåÏ°±Ìï¥Ïöî. ÌäπÌûà Î™®Í≥µÏù¥ÎÇò ÏûîÏ£ºÎ¶ÑÎèÑ ÏûêÏó∞Ïä§ÎüΩÍ≤å Ïª§Î≤ÑÌï¥Ï§òÏÑú ÌîºÎ∂ÄÍ∞Ä Ìõ®Ïî¨ ÍπîÎÅîÌï¥ Î≥¥Ïó¨Ïöî. ÏÉâÏÉÅÎèÑ Îã§ÏñëÌï¥ÏÑú ÎÇ¥ ÌîºÎ∂ÄÌÜ§Ïóê ÎßûÎäî Í±∏ Ï∞æÏùÑ Ïàò ÏûàÏñ¥Ïöî.",
                    rating: "4.6/5 Ï†úÌíàÌèâ(756Í±¥)",
                    productHighlight: "Îß§ÎÅÑÎü¨Ïö¥ ÌîºÎ∂Ä ÌëúÌòÑ!",
                    ctaText: "Ï†úÌíà Íµ¨Í≤ΩÌïòÍ≥† 7P Ïö©Îèà Î∞õÍ∏∞",
                    imageUrl: "https://image.oliveyoung.co.kr/uploads/images/goods/400/10/0000/0018/A00000018965101ko.jpg"
                },
                4: {
                    concern: "ÌîºÎ∂Ä ÌÉÑÎ†•",
                    brandName: "SK-II",
                    productTitle: "ÌéòÏù¥ÏÖú Ìä∏Î¶¨Ìä∏Î®ºÌä∏ ÏóêÏÑºÏä§ 230ml",
                    productReview: "ÎÇòÏù¥Í∞Ä Îì§Î©¥ÏÑú ÌîºÎ∂Ä ÌÉÑÎ†•Ïù¥ Îñ®Ïñ¥ÏßÄÎäî Í≤å Í≥†ÎØºÏù¥ÏóàÎäîÎç∞, Ïù¥ ÏóêÏÑºÏä§ Ïì∞Í≥† ÎÇòÏÑú ÌîºÎ∂ÄÍ∞Ä Ï†ïÎßê ÌÉ±ÌÉ±Ìï¥ÏßÑ ÎäêÎÇåÏù¥ÏóêÏöî! 2Ï£º Ï†ïÎèÑ Ïì∞ÎãàÍπå ÌîºÎ∂Ä Í≤∞Ïù¥ Îã¨ÎùºÏßÄÎäî Í±∏ ÎäêÍºàÍ≥†, ÏßÄÍ∏àÏùÄ 3Í∞úÏõîÏß∏ Ïì∞Í≥† ÏûàÎäîÎç∞ Ï£ºÎ≥ÄÏóêÏÑú ÌîºÎ∂ÄÍ∞Ä Ï¢ãÏïÑÏ°åÎã§Í≥† ÎßéÏù¥ ÎßêÌï¥Ï§òÏöî. Í∞íÏùÄ ÎπÑÏã∏ÏßÄÎßå Í∑∏ÎßåÌïú Í∞ÄÏπòÍ∞Ä ÏûàÎã§Í≥† ÏÉùÍ∞ÅÌï¥Ïöî.",
                    rating: "4.9/5 Ï†úÌíàÌèâ(2,341Í±¥)",
                    productHighlight: "ÌîÑÎ¶¨ÎØ∏ÏóÑ ÌÉÑÎ†• ÏºÄÏñ¥!",
                    ctaText: "Ï†úÌíà Íµ¨Í≤ΩÌïòÍ≥† 12P Ïö©Îèà Î∞õÍ∏∞",
                    imageUrl: "https://image.oliveyoung.co.kr/uploads/images/goods/400/10/0000/0015/A00000015234101ko.jpg"
                }
            };

            // Îç∞Ïù¥ÌÑ∞ Ï†ÄÏû•ÏÜå Ï¥àÍ∏∞Ìôî
            for (let i = 1; i <= 4; i++) {
                productDataStore[i] = { ...defaultData[i] };
            }

            // Ï≤´ Î≤àÏß∏ ÌÉ≠ÏúºÎ°ú ÎèåÏïÑÍ∞ÄÍ∏∞
            currentProduct = 1;
            document.querySelectorAll('.product-tab').forEach(tab => tab.classList.remove('active'));
            get('tab1').classList.add('active');

            // ÌèºÍ≥º ÏãúÎÆ¨Î†àÏù¥ÌÑ∞ ÏóÖÎç∞Ïù¥Ìä∏
            loadProductData(1);
            updateSimulator();

            // Î©îÏù∏ ÌôîÎ©¥ÏúºÎ°ú ÎèåÏïÑÍ∞ÄÍ∏∞
            get('productScreen').classList.add('hidden');
            get('loadingScreen').classList.add('hidden');
            get('mainScreen').classList.remove('hidden');

            showUpdateNotice();
        }

        // PNG Ïä§ÌÅ¨Î¶∞ÏÉ∑ Îã§Ïö¥Î°úÎìú Í∏∞Îä•
        async function downloadScreenshots() {
            showUpdateNotice('üì∏ ÌôîÎ©¥ Ï∫°Ï≤ò Ï§ë... Ïû†ÏãúÎßå Í∏∞Îã§Î†§Ï£ºÏÑ∏Ïöî');
            
            try {
                // html2canvas ÎùºÏù¥Î∏åÎü¨Î¶¨ ÎèôÏ†Å Î°úÎìú
                if (!window.html2canvas) {
                    await loadHtml2Canvas();
                }
                
                // ÌòÑÏû¨ Îç∞Ïù¥ÌÑ∞ Ï†ÄÏû•
                saveCurrentProductData();
                
                // 1. Î©îÏù∏ ÌôîÎ©¥ (Í≥†ÎØº ÏÑ†ÌÉù ÌéòÏù¥ÏßÄ) Ï∫°Ï≤ò
                await captureMainScreen();
                
                // 2. Ï†úÌíà ÏÉÅÏÑ∏ ÌôîÎ©¥ (ÏµúÏ¢Ö Í≤∞Í≥º ÌéòÏù¥ÏßÄ) Ï∫°Ï≤ò - Ï≤´ Î≤àÏß∏ Ï†úÌíàÏúºÎ°ú
                await captureProductScreen(1);
                
                showUpdateNotice('üì∏ ÌôîÎ©¥ Ï∫°Ï≤òÍ∞Ä ÏôÑÎ£åÎêòÏóàÏäµÎãàÎã§!');
                
            } catch (error) {
                console.error('Ïä§ÌÅ¨Î¶∞ÏÉ∑ ÏÉùÏÑ± Ï§ë Ïò§Î•ò:', error);
                showUpdateNotice('‚ùå ÌôîÎ©¥ Ï∫°Ï≤ò Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§');
            }
        }

        // html2canvas ÎùºÏù¥Î∏åÎü¨Î¶¨ ÎèôÏ†Å Î°úÎìú

        // Î©îÏù∏ ÌôîÎ©¥ Ï∫°Ï≤ò
        async function captureMainScreen() {
            // Î©îÏù∏ ÌôîÎ©¥Ïù¥ Î≥¥Ïù¥ÎèÑÎ°ù ÏÑ§Ï†ï
            get('mainScreen').classList.remove('hidden');
            get('loadingScreen').classList.add('hidden');
            get('productScreen').classList.add('hidden');
            
            // Ïû†Ïãú ÎåÄÍ∏∞ (ÌôîÎ©¥ Ï†ÑÌôò ÏôÑÎ£å)
            await new Promise(resolve => setTimeout(resolve, 300));
            
            // ÏãúÎÆ¨Î†àÏù¥ÌÑ∞ ÏòÅÏó≠Îßå Ï∫°Ï≤ò
            const simulatorElement = document.querySelector('.phone-screen');
            
            const canvas = await html2canvas(simulatorElement, {
                backgroundColor: '#ffffff',
                scale: 2, // Í≥†Ìï¥ÏÉÅÎèÑ
                useCORS: true,
                allowTaint: true
            });
            
            // ÌååÏùºÎ™Ö ÏÉùÏÑ±
            const now = new Date();
            const dateStr = now.toISOString().slice(0, 19).replace(/[:-]/g, '').replace('T', '_');
            const filename = `Îã•ÌÑ∞ÏßÄ_BuzzAd_Í≥†ÎØºÏÑ†ÌÉùÌôîÎ©¥_${dateStr}.png`;
            
            // Îã§Ïö¥Î°úÎìú
            downloadCanvas(canvas, filename);
        }

        // Ï†úÌíà ÏÉÅÏÑ∏ ÌôîÎ©¥ Ï∫°Ï≤ò
        async function captureProductScreen(productNum) {
            // Ï†úÌíà ÏÉÅÏÑ∏ ÌôîÎ©¥ ÌëúÏãú
            showProductScreen(productNum);
            
            // Ïû†Ïãú ÎåÄÍ∏∞ (ÌôîÎ©¥ Ï†ÑÌôò Î∞è Ïù¥ÎØ∏ÏßÄ Î°úÎìú ÏôÑÎ£å)
            await new Promise(resolve => setTimeout(resolve, 1500));
            
            // ÏãúÎÆ¨Î†àÏù¥ÌÑ∞ ÏòÅÏó≠Îßå Ï∫°Ï≤ò
            const simulatorElement = document.querySelector('.phone-screen');
            
            const canvas = await html2canvas(simulatorElement, {
                backgroundColor: '#ffffff',
                scale: 2, // Í≥†Ìï¥ÏÉÅÎèÑ
                useCORS: true,
                allowTaint: true,
                foreignObjectRendering: true,
                logging: false
            });
            
            // ÌååÏùºÎ™Ö ÏÉùÏÑ±
            const now = new Date();
            const dateStr = now.toISOString().slice(0, 19).replace(/[:-]/g, '').replace('T', '_');
            const productData = productDataStore[productNum];
            const concernName = (productData.concern || '').replace(/\n/g, '').replace(/[^\wÍ∞Ä-Ìû£]/g, '').substring(0, 10);
            const filename = `Îã•ÌÑ∞ÏßÄ_BuzzAd_Ï†úÌíàÏÉÅÏÑ∏ÌôîÎ©¥_${concernName}_${dateStr}.png`;
            
            // Îã§Ïö¥Î°úÎìú
            downloadCanvas(canvas, filename);
            
            // Î©îÏù∏ ÌôîÎ©¥ÏúºÎ°ú ÎêòÎèåÎ¶¨Í∏∞
            setTimeout(() => {
                goBack();
            }, 500);
        }

        // Ï∫îÎ≤ÑÏä§Î•º PNG ÌååÏùºÎ°ú Îã§Ïö¥Î°úÎìú
        function downloadCanvas(canvas, filename) {
            const link = document.createElement('a');
            link.download = filename;
            link.href = canvas.toDataURL('image/png');
            link.style.visibility = 'hidden';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }
        function downloadCSV() {
            // ÌòÑÏû¨ Ìé∏Ïßë Ï§ëÏù∏ Îç∞Ïù¥ÌÑ∞ Ï†ÄÏû•
            saveCurrentProductData();
            
            // CSV Ìó§Îçî
            const headers = [
                'Í≥†ÎØºÎ≤àÌò∏',
                'ÌîºÎ∂ÄÍ≥†ÎØº',
                'Î∏åÎûúÎìúÎ™Ö',
                'Ï†úÌíàÎ™Ö',
                'Í≥†Í∞ùÎ¶¨Î∑∞',
                'Î≥ÑÏ†êÏ†ïÎ≥¥',
                'Ï†úÌíàÌäπÏßï',
                'CTAÎ≤ÑÌäºÌÖçÏä§Ìä∏',
                'ÏÉÅÌíàÏù¥ÎØ∏ÏßÄURL'
            ];
            
            // CSV Îç∞Ïù¥ÌÑ∞ ÏÉùÏÑ±
            const csvData = [];
            csvData.push(headers.join(','));
            
            // Í∞Å Ï†úÌíà Îç∞Ïù¥ÌÑ∞Î•º CSV ÌñâÏúºÎ°ú Î≥ÄÌôò
            for (let i = 1; i <= 4; i++) {
                const data = productDataStore[i];
                const row = [
                    i,
                    `"${(data.concern || '').replace(/"/g, '""').replace(/\n/g, ' ')}"`,
                    `"${(data.brandName || '').replace(/"/g, '""')}"`,
                    `"${(data.productTitle || '').replace(/"/g, '""')}"`,
                    `"${(data.productReview || '').replace(/"/g, '""').replace(/\n/g, ' ')}"`,
                    `"${(data.rating || '').replace(/"/g, '""')}"`,
                    `"${(data.productHighlight || '').replace(/"/g, '""')}"`,
                    `"${(data.ctaText || '').replace(/"/g, '""')}"`,
                    `"${(data.imageUrl || '').replace(/"/g, '""')}"`
                ];
                csvData.push(row.join(','));
            }
            
            // ÌòÑÏû¨ ÎÇ†Ïßú ÏãúÍ∞ÑÏùÑ ÌååÏùºÎ™ÖÏóê Ìè¨Ìï®
            const now = new Date();
            const dateStr = now.toISOString().slice(0, 19).replace(/[:-]/g, '').replace('T', '_');
            const filename = `Îã•ÌÑ∞ÏßÄ_BuzzAd_ÏûòÍ≥†Î•∏Î¶¨Î∑∞_Í¥ëÍ≥†Îç∞Ïù¥ÌÑ∞_${dateStr}.csv`;
            
            // CSV ÌååÏùº Îã§Ïö¥Î°úÎìú
            const csvContent = '\uFEFF' + csvData.join('\n'); // UTF-8 BOM Ï∂îÍ∞Ä (ÌïúÍ∏Ä Íπ®Ïßê Î∞©ÏßÄ)
            const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            
            if (link.download !== undefined) {
                const url = URL.createObjectURL(blob);
                link.setAttribute('href', url);
                link.setAttribute('download', filename);
                link.style.visibility = 'hidden';
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
                
                // ÏÑ±Í≥µ ÏïåÎ¶º
                showUpdateNotice('üìä CSV ÌååÏùºÏù¥ Îã§Ïö¥Î°úÎìúÎêòÏóàÏäµÎãàÎã§!');
            } else {
                alert('Î∏åÎùºÏö∞Ï†ÄÏóêÏÑú ÌååÏùº Îã§Ïö¥Î°úÎìúÎ•º ÏßÄÏõêÌïòÏßÄ ÏïäÏäµÎãàÎã§.');
            }
        }

        // ÏóÖÎç∞Ïù¥Ìä∏ ÏïåÎ¶º ÌëúÏãú (Î©îÏãúÏßÄ Ïª§Ïä§ÌÑ∞ÎßàÏù¥Ïßï Í∞ÄÎä•)
        function showUpdateNotice(message = '‚ö° Ïã§ÏãúÍ∞Ñ ÏóÖÎç∞Ïù¥Ìä∏Îê®') {
            const notice = get('updateNotice');
            notice.textContent = message;
            notice.classList.add('show');
            setTimeout(() => {
                notice.classList.remove('show');
            }, 3000);
        }
    
</script>

<script id="legacy-capture-adapter">
function saveCurrentProductData(){
    if(!window.productDataStore) window.productDataStore = {};
    for(let i=1;i<=AppState.config.productCount;i++){
        const p = AppState.products[i];
        productDataStore[i] = {
            concern: p.concern,
            brandName: AppState.config.commonBrand,
            productTitle: p.productTitle,
            productReview: p.productReview,
            rating: p.rating,
            productHighlight: p.productHighlight,
            ctaText: AppState.config.ctaText,
            imageUrl: p.imageUrl
        };
    }
    window.currentProduct = AppState.currentProduct || 1;
}
window.App = window.App || {};
App.captureScreens = function(){ window.testButtonClick(); };
</script>

</body>
</html>